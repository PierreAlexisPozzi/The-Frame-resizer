<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Resizer pour The Frame</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --spotify-black: #191414;
            --spotify-dark: #1e1e1e;
            --spotify-light-black: #282828;
            --spotify-green: #1DB954;
            --spotify-white: #FFFFFF;
            --spotify-gray: #b3b3b3;
            --spotify-dark-gray: #535353;
            --accent-blue: #2D46B9;
            --accent-purple: #AF2896;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--spotify-black);
            color: var(--spotify-white);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--spotify-dark-gray);
            position: relative;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
        }
        
        /* Language Selector */
        .language-selector {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .language-selector select {
            background-color: var(--spotify-light-black);
            color: var(--spotify-white);
            border: 1px solid var(--spotify-dark-gray);
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        .language-selector select:focus {
            outline: none;
            border-color: var(--spotify-green);
        }
        
        /* Navigation */
        .main-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .nav-btn {
            background-color: var(--spotify-light-black);
            color: var(--spotify-white);
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s;
            margin: 0 10px;
        }
        
        .nav-btn:hover {
            background-color: var(--spotify-green);
            color: var(--spotify-black);
        }
        
        .nav-btn.active {
            background-color: var(--spotify-green);
            color: var(--spotify-black);
        }
        
        /* Cards Section */
        .cards-section {
            margin-bottom: 20px;
            position: relative;
        }
        
        .section-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-align: center;
        }
        
        .cards-container-wrapper {
            position: relative;
            overflow: hidden;
        }
        
        .cards-container {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 10px;
            scroll-behavior: smooth;
            scrollbar-width: none; /* Firefox */
        }
        
        .cards-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Edge */
        }
        
        .card {
            background-color: var(--spotify-light-black);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-width: 250px;
            flex-shrink: 0;
        }
        
        .card.active {
            border: 2px solid var(--spotify-green);
        }
        
        .card.completed::after {
            content: '✓';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 25px;
            height: 25px;
            background-color: var(--spotify-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--spotify-black);
        }
        
        .card:hover {
            background-color: #3a3a3a;
            transform: translateY(-5px);
        }
        
        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .upload-icon {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
        }
        
        .dimension-icon {
            background: linear-gradient(135deg, var(--spotify-green), #1ed760);
        }
        
        .preview-icon {
            background: linear-gradient(135deg, #ff9a00, #ff6a00);
        }
        
        .download-icon {
            background: linear-gradient(135deg, #ff375f, #ff2e6c);
        }
        
        .card h3 {
            font-size: 1rem;
            margin-bottom: 8px;
        }
        
        .card p {
            color: var(--spotify-gray);
            font-size: 0.85rem;
        }
        
        /* Navigation arrows for steps */
        .step-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 35px;
            height: 35px;
            background-color: rgba(0, 0, 0, 0.5);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s;
            opacity: 0.7;
        }
        
        .step-nav:hover {
            opacity: 1;
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .step-nav.prev {
            left: 5px;
        }
        
        .step-nav.next {
            right: 5px;
        }
        
        .step-nav:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .step-nav:disabled:hover {
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        /* Progress bar - repositionnée entre les étapes et le contenu */
        .progress-section {
            margin: 25px 0;
            padding: 0 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: var(--spotify-dark-gray);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--spotify-green));
            border-radius: 3px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.8rem;
            color: var(--spotify-gray);
        }
        
        /* Content sections */
        .content-section {
            background: linear-gradient(180deg, #3a3a3a 0%, var(--spotify-dark) 100%);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        /* Upload section */
        .upload-area {
            border: 2px dashed var(--spotify-dark-gray);
            border-radius: 8px;
            padding: 40px 15px;
            text-align: center;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upload-area:hover {
            border-color: var(--spotify-green);
            background-color: rgba(29, 185, 84, 0.05);
        }
        
        .upload-area i {
            font-size: 2.5rem;
            color: var(--spotify-green);
            margin-bottom: 10px;
        }
        
        .upload-area p {
            font-size: 0.9rem;
        }
        
        /* Selected files */
        .selected-files {
            margin-top: 15px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: var(--spotify-light-black);
            border-radius: 4px;
            margin-bottom: 8px;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
            overflow: hidden;
        }
        
        .file-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }
        
        .file-icon {
            color: var(--spotify-green);
        }
        
        .remove-file {
            background: none;
            border: none;
            color: var(--spotify-gray);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .remove-file:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--spotify-white);
        }
        
        /* Dimension selector */
        .dimension-selector {
            margin-top: 20px;
        }
        
        .dimension-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .dimension-option {
            background-color: var(--spotify-light-black);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        
        .dimension-option:hover {
            transform: translateY(-3px);
            background-color: #3a3a3a;
        }
        
        .dimension-option.active {
            border-color: var(--spotify-green);
            background-color: rgba(29, 185, 84, 0.1);
        }
        
        .dimension-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .dimension-size {
            font-size: 0.8rem;
            color: var(--spotify-gray);
        }
        
        .custom-dimension {
            margin-top: 15px;
            display: none;
        }
        
        .custom-inputs {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .custom-inputs input {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 4px;
            background-color: var(--spotify-light-black);
            color: var(--spotify-white);
            font-size: 0.9rem;
        }
        
        input::placeholder {
            color: var(--spotify-gray);
        }
        
        button {
            background-color: var(--spotify-green);
            color: var(--spotify-black);
            border: none;
            padding: 12px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 700;
            transition: all 0.3s;
            margin-top: 15px;
            width: 100%;
            letter-spacing: 1px;
        }
        
        button:hover {
            background-color: #1ed760;
            transform: scale(1.03);
        }
        
        .download-btn {
            background-color: var(--accent-blue);
            color: white;
        }
        
        .download-btn:hover {
            background-color: #3a5bd9;
        }
        
        /* Preview section */
        .preview-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 250px;
            background-color: var(--spotify-black);
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
            position: relative;
        }
        
        #previewImage {
            max-width: 100%;
            max-height: 100%;
            display: none;
        }
        
        .preview-info {
            background-color: var(--spotify-light-black);
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .info-label {
            font-weight: bold;
            color: var(--spotify-gray);
        }
        
        /* Products Section */
        .products-section {
            background: linear-gradient(180deg, #3a3a3a 0%, var(--spotify-dark) 100%);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .products-title {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
        }
        
        .products-subtitle {
            text-align: center;
            margin-bottom: 30px;
            color: var(--spotify-gray);
            font-size: 1.1rem;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .product-card {
            background-color: var(--spotify-light-black);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.2);
        }
        
        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid var(--spotify-dark-gray);
        }
        
        .product-content {
            padding: 20px;
        }
        
        .product-category {
            color: var(--spotify-green);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .product-name {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .product-description {
            color: var(--spotify-gray);
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .product-price {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--spotify-green);
        }
        
        .product-link {
            display: block;
            background-color: var(--spotify-green);
            color: var(--spotify-black);
            text-align: center;
            padding: 12px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s;
        }
        
        .product-link:hover {
            background-color: #1ed760;
            transform: scale(1.03);
        }
        
        .products-note {
            text-align: center;
            color: var(--spotify-gray);
            font-size: 0.9rem;
            margin-top: 20px;
            font-style: italic;
        }
        
        /* Legal Section */
        .legal-section {
            background: linear-gradient(180deg, #3a3a3a 0%, var(--spotify-dark) 100%);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .legal-title {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
        }
        
        .legal-content {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .legal-section h2 {
            margin: 25px 0 15px;
            color: var(--spotify-green);
            font-size: 1.4rem;
        }
        
        .legal-section h3 {
            margin: 20px 0 10px;
            font-size: 1.2rem;
        }
        
        .legal-section p {
            margin-bottom: 15px;
            line-height: 1.7;
        }
        
        .legal-section ul {
            margin: 15px 0 15px 30px;
        }
        
        .legal-section li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .back-btn {
            display: block;
            width: 200px;
            margin: 30px auto 0;
            text-align: center;
        }
        
        /* Footer */
        footer {
            background-color: var(--spotify-black);
            padding: 15px 0;
            margin-top: 30px;
            text-align: center;
            color: var(--spotify-gray);
            border-top: 1px solid var(--spotify-dark-gray);
            font-size: 0.8rem;
        }
        
        .footer-links {
            margin-top: 10px;
        }
        
        .footer-links a {
            color: var(--spotify-green);
            text-decoration: none;
            margin: 0 10px;
            transition: all 0.3s;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
            }
            
            .language-selector {
                position: static;
                transform: none;
                align-self: flex-end;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .dimension-options {
                grid-template-columns: 1fr;
            }
            
            .custom-inputs {
                flex-direction: column;
            }
            
            .step-nav {
                display: none;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .preview-container {
                height: 200px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .logo h1 {
                font-size: 1.3rem;
            }
            
            .card {
                min-width: 220px;
                padding: 12px;
            }
            
            .main-nav {
                flex-direction: column;
                gap: 10px;
            }
            
            .nav-btn {
                margin: 5px 0;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Loading animation */
        .loading {
            display: none;
            text-align: center;
            margin: 15px 0;
        }
        
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: var(--spotify-green);
            border-radius: 50%;
            width: 35px;
            height: 35px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .action-buttons button {
            margin-top: 0;
        }
        
        .restart-btn {
            background-color: var(--spotify-dark-gray);
            color: var(--spotify-white);
        }
        
        .restart-btn:hover {
            background-color: var(--spotify-gray);
        }
        
        /* Hide sections by default */
        .section-hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-tv"></i>
                </div>
                <h1 data-translate="app_title">Image Resizer pour The Frame</h1>
            </div>
            
            <!-- Language Selector -->
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="fr">Français</option>
                    <option value="en">English</option>
                    <option value="es">Español</option>
                    <option value="de">Deutsch</option>
                </select>
            </div>
        </div>

        <!-- Navigation -->
        <div class="main-nav">
            <button class="nav-btn active" id="resizerBtn" data-translate="resizer_btn">Redimensionneur d'images</button>
            <button class="nav-btn" id="productsBtn" data-translate="products_btn">Produits recommandés</button>
        </div>

        <!-- Resizer Section -->
        <div id="resizerSection">
            <!-- Cards Section -->
            <div class="cards-section">
                <h2 class="section-title" data-translate="steps_title">Étapes de redimensionnement</h2>
                <div class="cards-container-wrapper">
                    <button class="step-nav prev" id="stepNavPrev">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="cards-container" id="cardsContainer">
                        <div class="card active" id="step1Card">
                            <div class="card-icon upload-icon">
                                <i class="fas fa-upload"></i>
                            </div>
                            <h3 data-translate="step1_title">1. Téléchargez votre image</h3>
                            <p data-translate="step1_desc">Sélectionnez votre image depuis votre appareil</p>
                        </div>
                        <div class="card" id="step2Card">
                            <div class="card-icon dimension-icon">
                                <i class="fas fa-expand-alt"></i>
                            </div>
                            <h3 data-translate="step2_title">2. Sélectionnez la dimension</h3>
                            <p data-translate="step2_desc">Choisissez le modèle de votre TV The Frame Samsung</p>
                        </div>
                        <div class="card" id="step3Card">
                            <div class="card-icon preview-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <h3 data-translate="step3_title">3. Vérifiez l'aperçu</h3>
                            <p data-translate="step3_desc">Contrôlez le résultat avant le téléchargement</p>
                        </div>
                        <div class="card" id="step4Card">
                            <div class="card-icon download-icon">
                                <i class="fas fa-download"></i>
                            </div>
                            <h3 data-translate="step4_title">4. Téléchargez</h3>
                            <p data-translate="step4_desc">Récupérez votre image parfaitement dimensionnée</p>
                        </div>
                    </div>
                    <button class="step-nav next" id="stepNavNext">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Progress Bar - repositionnée entre les étapes et le contenu -->
            <div class="progress-section">
                <div class="progress-bar">
                    <div class="progress" id="progressBar"></div>
                </div>
                <div class="progress-labels">
                    <span data-translate="step1_label">Étape 1</span>
                    <span data-translate="step2_label">Étape 2</span>
                    <span data-translate="step3_label">Étape 3</span>
                    <span data-translate="step4_label">Étape 4</span>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="content-section" id="step1Content">
                <h2 class="section-title" data-translate="upload_title">Télécharger votre image</h2>
                
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p data-translate="upload_text">Cliquez pour sélectionner votre image</p>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;">
                </div>
                
                <div class="selected-files" id="selectedFiles"></div>
                
                <button id="nextStep1Btn" disabled data-translate="continue_step2">Continuer vers l'étape 2</button>
            </div>
            
            <!-- Dimension Selection Section -->
            <div class="content-section section-hidden" id="step2Content">
                <h2 class="section-title" data-translate="dimension_title">Sélectionnez la dimension de votre TV</h2>
                
                <div class="dimension-options">
                    <div class="dimension-option active" data-width="1920" data-height="1080">
                        <div class="dimension-name">43"</div>
                        <div class="dimension-size">1920 × 1080</div>
                    </div>
                    <div class="dimension-option" data-width="3840" data-height="2160">
                        <div class="dimension-name">50"</div>
                        <div class="dimension-size">3840 × 2160</div>
                    </div>
                    <div class="dimension-option" data-width="3840" data-height="2160">
                        <div class="dimension-name">55"</div>
                        <div class="dimension-size">3840 × 2160</div>
                    </div>
                    <div class="dimension-option" data-width="3840" data-height="2160">
                        <div class="dimension-name">65"</div>
                        <div class="dimension-size">3840 × 2160</div>
                    </div>
                    <div class="dimension-option" data-width="3840" data-height="2160">
                        <div class="dimension-name">75"</div>
                        <div class="dimension-size">3840 × 2160</div>
                    </div>
                    <div class="dimension-option" id="customOption">
                        <div class="dimension-name" data-translate="custom_dimension">Personnalisé</div>
                        <div class="dimension-size" data-translate="other_dimension">Autre dimension</div>
                    </div>
                </div>
                
                <div class="custom-dimension" id="customDimension">
                    <h4 data-translate="custom_dimensions">Dimensions personnalisées</h4>
                    <div class="custom-inputs">
                        <input type="number" id="customWidth" placeholder="Largeur" min="1" data-translate-placeholder="width_placeholder">
                        <input type="number" id="customHeight" placeholder="Hauteur" min="1" data-translate-placeholder="height_placeholder">
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="prevStep2Btn" data-translate="back_step1">Retour à l'étape 1</button>
                    <button id="nextStep2Btn" data-translate="continue_preview">Continuer vers l'aperçu</button>
                </div>
            </div>
            
            <!-- Preview Section -->
            <div class="content-section section-hidden" id="step3Content">
                <h2 class="section-title" data-translate="preview_title">Aperçu et téléchargement</h2>
                
                <div class="preview-container">
                    <canvas id="previewCanvas"></canvas>
                    <p id="placeholderText" data-translate="preview_placeholder">L'image redimensionnée apparaîtra ici</p>
                </div>
                
                <div class="preview-info">
                    <div class="info-item">
                        <span class="info-label" data-translate="original_dimensions">Dimensions originales:</span>
                        <span id="originalDimensions">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label" data-translate="new_dimensions">Nouvelles dimensions:</span>
                        <span id="newDimensions">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label" data-translate="file_size">Taille du fichier:</span>
                        <span id="fileSize">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label" data-translate="file_format">Format:</span>
                        <span id="fileFormat">-</span>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="prevStep3Btn" data-translate="back_dimensions">Retour aux dimensions</button>
                    <button class="download-btn" id="downloadBtn" disabled>
                        <i class="fas fa-download"></i> <span data-translate="download_resized">Télécharger l'image redimensionnée</span>
                    </button>
                    <button class="restart-btn" id="restartBtn">
                        <i class="fas fa-redo"></i> <span data-translate="restart">Recommencer</span>
                    </button>
                </div>
                
                <div class="loading" id="loadingIndicator">
                    <div class="spinner"></div>
                    <p data-translate="resizing_in_progress">Redimensionnement en cours...</p>
                </div>
            </div>
        </div>

        <!-- Products Section -->
        <div id="productsSection" class="section-hidden">
            <div class="products-section">
                <h2 class="products-title" data-translate="products_title">Accessoires recommandés pour Samsung The Frame</h2>
                <p class="products-subtitle" data-translate="products_subtitle">Découvrez notre sélection d'accessoires compatibles avec votre TV The Frame</p>
                
                <div class="products-grid" id="productsGrid">
                    <!-- Les produits seront générés dynamiquement par JavaScript -->
                </div>
                
                <p class="products-note" data-translate="products_note">
                    Note: Ces liens sont des liens d'affiliation. Si vous effectuez un achat via ces liens, je pourrais recevoir une petite commission sans frais supplémentaires pour vous.
                </p>
            </div>
        </div>

        <!-- Legal Section -->
        <div id="legalSection" class="section-hidden">
            <div class="legal-section">
                <h1 class="legal-title" data-translate="legal_title">Mentions Légales & Politique de Confidentialité</h1>
                
                <div class="legal-content">
                    <h2 data-translate="legal_editor">Éditeur du site</h2>
                    <p data-translate="legal_editor_content">
                        Le site "Image Resizer pour The Frame" est édité par [Nom de l'entreprise ou de l'individu], 
                        [statut juridique], au capital de [montant du capital] euros, immatriculée au Registre du Commerce 
                        et des Sociétés de [ville] sous le numéro [numéro RCS], dont le siège social est situé [adresse complète].
                    </p>
                    
                    <h2 data-translate="legal_publication">Directeur de la publication</h2>
                    <p data-translate="legal_publication_content">
                        [Nom du directeur de publication], en qualité de [fonction].
                    </p>
                    
                    <h2 data-translate="legal_hosting">Hébergement</h2>
                    <p data-translate="legal_hosting_content">
                        Ce site est hébergé par [Nom de l'hébergeur], [adresse de l'hébergeur].
                    </p>
                    
                    <h2 data-translate="legal_contact">Contact</h2>
                    <p data-translate="legal_contact_content">
                        Pour toute question ou demande d'information concernant le site, ou pour signaler un contenu, 
                        l'utilisateur peut contacter l'éditeur à l'adresse e-mail suivante : [adresse email de contact].
                    </p>
                    
                    <h2 data-translate="rgpd_title">Protection des données personnelles et conformité RGPD</h2>
                    
                    <h3 data-translate="rgpd_data_collection">Collecte des données</h3>
                    <p data-translate="rgpd_data_collection_content">
                        Le site "Image Resizer pour The Frame" s'engage à protéger la vie privée de ses utilisateurs. 
                        Conformément au Règlement Général sur la Protection des Données (RGPD), nous informons nos utilisateurs que :
                    </p>
                    <ul>
                        <li data-translate="rgpd_point1">Aucune image téléchargée sur ce site n'est stockée sur nos serveurs</li>
                        <li data-translate="rgpd_point2">Le traitement des images s'effectue entièrement dans votre navigateur</li>
                        <li data-translate="rgpd_point3">Aucune donnée personnelle n'est collectée sans votre consentement explicite</li>
                        <li data-translate="rgpd_point4">Aucun cookie de suivi n'est utilisé sur ce site</li>
                        <li data-translate="rgpd_point5">Les images sont traitées localement et ne quittent jamais votre appareil</li>
                    </ul>
                    
                    <h3 data-translate="rgpd_data_usage">Utilisation des données</h3>
                    <p data-translate="rgpd_data_usage_content">
                        Les seules données potentiellement collectées sont des données de navigation anonymisées 
                        à des fins statistiques, et éventuellement votre adresse email si vous choisissez de nous contacter.
                    </p>
                    
                    <h3 data-translate="rgpd_user_rights">Droits des utilisateurs</h3>
                    <p data-translate="rgpd_user_rights_content">
                        Conformément à la réglementation en vigueur, vous disposez des droits suivants concernant vos données personnelles :
                    </p>
                    <ul>
                        <li data-translate="rgpd_right1">Droit d'accès et de rectification</li>
                        <li data-translate="rgpd_right2">Droit à l'effacement</li>
                        <li data-translate="rgpd_right3">Droit à la limitation du traitement</li>
                        <li data-translate="rgpd_right4">Droit d'opposition</li>
                        <li data-translate="rgpd_right5">Droit à la portabilité des données</li>
                    </ul>
                    <p data-translate="rgpd_rights_contact">
                        Pour exercer ces droits, vous pouvez nous contacter à l'adresse : [adresse email dédiée à la protection des données].
                    </p>
                    
                    <h2 data-translate="cookies_title">Cookies</h2>
                    <p data-translate="cookies_content">
                        Ce site n'utilise aucun cookie de suivi. Seuls des cookies techniques essentiels au fonctionnement 
                        du site peuvent être utilisés, et ceux-ci ne contiennent aucune information personnelle identifiable.
                    </p>
                    
                    <h2 data-translate="intellectual_property_title">Propriété intellectuelle</h2>
                    <p data-translate="intellectual_property_content">
                        L'ensemble des éléments constituant le site (textes, graphismes, logiciels, photographies, images, vidéos, sons, 
                        plans, logos, marques, etc.) sont la propriété exclusive de l'éditeur ou de ses partenaires. Toute reproduction, 
                        représentation, utilisation ou adaptation, sous quelque forme que ce soit, de tout ou partie de ces éléments, 
                        y compris les applications informatiques, sans l'accord préalable et écrit de l'éditeur, sont strictement interdites.
                    </p>
                    
                    <h2 data-translate="liability_title">Responsabilité</h2>
                    <p data-translate="liability_content">
                        L'éditeur du site ne pourra être tenu responsable des dommages directs ou indirects causés au matériel de l'utilisateur, 
                        lors de l'accès au site. L'utilisateur du site s'engage à accéder au site en utilisant un matériel récent, ne contenant 
                        pas de virus et avec un navigateur de dernière génération mis à jour.
                    </p>
                    
                    <h2 data-translate="affiliate_links_title">Liens d'affiliation</h2>
                    <p data-translate="affiliate_links_content">
                        Certains liens présents sur ce site sont des liens d'affiliation. Cela signifie que si vous effectuez un achat via ces liens, 
                        nous pouvons percevoir une commission, sans aucun coût supplémentaire pour vous. Ces commissions nous aident à financer 
                        le maintien et le développement de ce service gratuit.
                    </p>
                    
                    <h2 data-translate="changes_title">Modification des mentions légales</h2>
                    <p data-translate="changes_content">
                        L'éditeur se réserve le droit de modifier à tout moment les présentes mentions légales. 
                        L'utilisateur est donc invité à les consulter régulièrement.
                    </p>
                    
                    <button class="back-btn" id="backFromLegalBtn" data-translate="back_to_home">
                        <i class="fas fa-arrow-left"></i> Retour à l'accueil
                    </button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p data-translate="footer_text">Outil de redimensionnement d'images pour Samsung The Frame - Design inspiré de Spotify</p>
            <div class="footer-links">
                <a href="#" id="legalLink" data-translate="legal_link">Mentions légales & Politique de confidentialité</a>
            </div>
        </div>
    </footer>

    <script>
        // Système de traduction
        const translations = {
            fr: {
                // Titres généraux
                'app_title': 'Image Resizer pour The Frame',
                'resizer_btn': 'Redimensionneur d\'images',
                'products_btn': 'Produits recommandés',
                
                // Étapes
                'steps_title': 'Étapes de redimensionnement',
                'step1_title': '1. Téléchargez votre image',
                'step1_desc': 'Sélectionnez votre image depuis votre appareil',
                'step2_title': '2. Sélectionnez la dimension',
                'step2_desc': 'Choisissez le modèle de votre TV The Frame Samsung',
                'step3_title': '3. Vérifiez l\'aperçu',
                'step3_desc': 'Contrôlez le résultat avant le téléchargement',
                'step4_title': '4. Téléchargez',
                'step4_desc': 'Récupérez votre image parfaitement dimensionnée',
                
                // Labels des étapes
                'step1_label': 'Étape 1',
                'step2_label': 'Étape 2',
                'step3_label': 'Étape 3',
                'step4_label': 'Étape 4',
                
                // Section upload
                'upload_title': 'Télécharger votre image',
                'upload_text': 'Cliquez pour sélectionner votre image',
                'continue_step2': 'Continuer vers l\'étape 2',
                
                // Section dimensions
                'dimension_title': 'Sélectionnez la dimension de votre TV',
                'custom_dimension': 'Personnalisé',
                'other_dimension': 'Autre dimension',
                'custom_dimensions': 'Dimensions personnalisées',
                'width_placeholder': 'Largeur',
                'height_placeholder': 'Hauteur',
                'back_step1': 'Retour à l\'étape 1',
                'continue_preview': 'Continuer vers l\'aperçu',
                
                // Section aperçu
                'preview_title': 'Aperçu et téléchargement',
                'preview_placeholder': 'L\'image redimensionnée apparaîtra ici',
                'original_dimensions': 'Dimensions originales:',
                'new_dimensions': 'Nouvelles dimensions:',
                'file_size': 'Taille du fichier:',
                'file_format': 'Format:',
                'back_dimensions': 'Retour aux dimensions',
                'download_resized': 'Télécharger l\'image redimensionnée',
                'restart': 'Recommencer',
                'resizing_in_progress': 'Redimensionnement en cours...',
                
                // Section produits
                'products_title': 'Accessoires recommandés pour Samsung The Frame',
                'products_subtitle': 'Découvrez notre sélection d\'accessoires compatibles avec votre TV The Frame',
                'products_note': 'Note: Ces liens sont des liens d\'affiliation. Si vous effectuez un achat via ces liens, je pourrais recevoir une petite commission sans frais supplémentaires pour vous.',
                
                // Section mentions légales
                'legal_title': 'Mentions Légales & Politique de Confidentialité',
                'legal_link': 'Mentions légales & Politique de confidentialité',
                'legal_editor': 'Éditeur du site',
                'legal_editor_content': 'Le site "Image Resizer pour The Frame" est édité par [Nom de l\'entreprise ou de l\'individu], [statut juridique], au capital de [montant du capital] euros, immatriculée au Registre du Commerce et des Sociétés de [ville] sous le numéro [numéro RCS], dont le siège social est situé [adresse complète].',
                'legal_publication': 'Directeur de la publication',
                'legal_publication_content': '[Nom du directeur de publication], en qualité de [fonction].',
                'legal_hosting': 'Hébergement',
                'legal_hosting_content': 'Ce site est hébergé par [Nom de l\'hébergeur], [adresse de l\'hébergeur].',
                'legal_contact': 'Contact',
                'legal_contact_content': 'Pour toute question ou demande d\'information concernant le site, ou pour signaler un contenu, l\'utilisateur peut contacter l\'éditeur à l\'adresse e-mail suivante : [adresse email de contact].',
                'rgpd_title': 'Protection des données personnelles et conformité RGPD',
                'rgpd_data_collection': 'Collecte des données',
                'rgpd_data_collection_content': 'Le site "Image Resizer pour The Frame" s\'engage à protéger la vie privée de ses utilisateurs. Conformément au Règlement Général sur la Protection des Données (RGPD), nous informons nos utilisateurs que :',
                'rgpd_point1': 'Aucune image téléchargée sur ce site n\'est stockée sur nos serveurs',
                'rgpd_point2': 'Le traitement des images s\'effectue entièrement dans votre navigateur',
                'rgpd_point3': 'Aucune donnée personnelle n\'est collectée sans votre consentement explicite',
                'rgpd_point4': 'Aucun cookie de suivi n\'est utilisé sur ce site',
                'rgpd_point5': 'Les images sont traitées localement et ne quittent jamais votre appareil',
                'rgpd_data_usage': 'Utilisation des données',
                'rgpd_data_usage_content': 'Les seules données potentiellement collectées sont des données de navigation anonymisées à des fins statistiques, et éventuellement votre adresse email si vous choisissez de nous contacter.',
                'rgpd_user_rights': 'Droits des utilisateurs',
                'rgpd_user_rights_content': 'Conformément à la réglementation en vigueur, vous disposez des droits suivants concernant vos données personnelles :',
                'rgpd_right1': 'Droit d\'accès et de rectification',
                'rgpd_right2': 'Droit à l\'effacement',
                'rgpd_right3': 'Droit à la limitation du traitement',
                'rgpd_right4': 'Droit d\'opposition',
                'rgpd_right5': 'Droit à la portabilité des données',
                'rgpd_rights_contact': 'Pour exercer ces droits, vous pouvez nous contacter à l\'adresse : [adresse email dédiée à la protection des données].',
                'cookies_title': 'Cookies',
                'cookies_content': 'Ce site n\'utilise aucun cookie de suivi. Seuls des cookies techniques essentiels au fonctionnement du site peuvent être utilisés, et ceux-ci ne contiennent aucune information personnelle identifiable.',
                'intellectual_property_title': 'Propriété intellectuelle',
                'intellectual_property_content': 'L\'ensemble des éléments constituant le site (textes, graphismes, logiciels, photographies, images, vidéos, sons, plans, logos, marques, etc.) sont la propriété exclusive de l\'éditeur ou de ses partenaires. Toute reproduction, représentation, utilisation ou adaptation, sous quelque forme que ce soit, de tout ou partie de ces éléments, y compris les applications informatiques, sans l\'accord préalable et écrit de l\'éditeur, sont strictement interdites.',
                'liability_title': 'Responsabilité',
                'liability_content': 'L\'éditeur du site ne pourra être tenu responsable des dommages directs ou indirects causés au matériel de l\'utilisateur, lors de l\'accès au site. L\'utilisateur du site s\'engage à accéder au site en utilisant un matériel récent, ne contenant pas de virus et avec un navigateur de dernière génération mis à jour.',
                'affiliate_links_title': 'Liens d\'affiliation',
                'affiliate_links_content': 'Certains liens présents sur ce site sont des liens d\'affiliation. Cela signifie que si vous effectuez un achat via ces liens, nous pouvons percevoir une commission, sans aucun coût supplémentaire pour vous. Ces commissions nous aident à financer le maintien et le développement de ce service gratuit.',
                'changes_title': 'Modification des mentions légales',
                'changes_content': 'L\'éditeur se réserve le droit de modifier à tout moment les présentes mentions légales. L\'utilisateur est donc invité à les consulter régulièrement.',
                'back_to_home': 'Retour à l\'accueil',
                
                // Footer
                'footer_text': 'Outil de redimensionnement d\'images pour Samsung The Frame - Design inspiré de Spotify'
            },
            en: {
                // General titles
                'app_title': 'Image Resizer for The Frame',
                'resizer_btn': 'Image Resizer',
                'products_btn': 'Recommended Products',
                
                // Steps
                'steps_title': 'Resizing Steps',
                'step1_title': '1. Upload your image',
                'step1_desc': 'Select your image from your device',
                'step2_title': '2. Select the dimension',
                'step2_desc': 'Choose your Samsung The Frame TV model',
                'step3_title': '3. Check the preview',
                'step3_desc': 'Check the result before downloading',
                'step4_title': '4. Download',
                'step4_desc': 'Get your perfectly sized image',
                
                // Step labels
                'step1_label': 'Step 1',
                'step2_label': 'Step 2',
                'step3_label': 'Step 3',
                'step4_label': 'Step 4',
                
                // Upload section
                'upload_title': 'Upload your image',
                'upload_text': 'Click to select your image',
                'continue_step2': 'Continue to step 2',
                
                // Dimension section
                'dimension_title': 'Select your TV dimension',
                'custom_dimension': 'Custom',
                'other_dimension': 'Other dimension',
                'custom_dimensions': 'Custom dimensions',
                'width_placeholder': 'Width',
                'height_placeholder': 'Height',
                'back_step1': 'Back to step 1',
                'continue_preview': 'Continue to preview',
                
                // Preview section
                'preview_title': 'Preview and download',
                'preview_placeholder': 'The resized image will appear here',
                'original_dimensions': 'Original dimensions:',
                'new_dimensions': 'New dimensions:',
                'file_size': 'File size:',
                'file_format': 'Format:',
                'back_dimensions': 'Back to dimensions',
                'download_resized': 'Download resized image',
                'restart': 'Start over',
                'resizing_in_progress': 'Resizing in progress...',
                
                // Products section
                'products_title': 'Recommended Accessories for Samsung The Frame',
                'products_subtitle': 'Discover our selection of accessories compatible with your The Frame TV',
                'products_note': 'Note: These are affiliate links. If you make a purchase through these links, I may receive a small commission at no extra cost to you.',
                
                // Legal section
                'legal_title': 'Legal Notice & Privacy Policy',
                'legal_link': 'Legal Notice & Privacy Policy',
                'legal_editor': 'Website Publisher',
                'legal_editor_content': 'The website "Image Resizer for The Frame" is published by [Company or Individual Name], [legal status], with a capital of [capital amount] euros, registered with the Trade and Companies Register of [city] under number [RCS number], whose registered office is located at [full address].',
                'legal_publication': 'Publication Director',
                'legal_publication_content': '[Publication Director Name], in their capacity as [function].',
                'legal_hosting': 'Hosting',
                'legal_hosting_content': 'This site is hosted by [Hosting Provider Name], [hosting provider address].',
                'legal_contact': 'Contact',
                'legal_contact_content': 'For any questions or requests for information regarding the site, or to report content, the user can contact the publisher at the following email address: [contact email address].',
                'rgpd_title': 'Personal Data Protection and GDPR Compliance',
                'rgpd_data_collection': 'Data Collection',
                'rgpd_data_collection_content': 'The "Image Resizer for The Frame" website is committed to protecting the privacy of its users. In accordance with the General Data Protection Regulation (GDPR), we inform our users that:',
                'rgpd_point1': 'No images uploaded to this site are stored on our servers',
                'rgpd_point2': 'Image processing is done entirely in your browser',
                'rgpd_point3': 'No personal data is collected without your explicit consent',
                'rgpd_point4': 'No tracking cookies are used on this site',
                'rgpd_point5': 'Images are processed locally and never leave your device',
                'rgpd_data_usage': 'Data Usage',
                'rgpd_data_usage_content': 'The only data potentially collected is anonymized browsing data for statistical purposes, and possibly your email address if you choose to contact us.',
                'rgpd_user_rights': 'User Rights',
                'rgpd_user_rights_content': 'In accordance with applicable regulations, you have the following rights regarding your personal data:',
                'rgpd_right1': 'Right of access and rectification',
                'rgpd_right2': 'Right to erasure',
                'rgpd_right3': 'Right to restriction of processing',
                'rgpd_right4': 'Right to object',
                'rgpd_right5': 'Right to data portability',
                'rgpd_rights_contact': 'To exercise these rights, you can contact us at: [email address dedicated to data protection].',
                'cookies_title': 'Cookies',
                'cookies_content': 'This site does not use any tracking cookies. Only technical cookies essential to the functioning of the site may be used, and these do not contain any identifiable personal information.',
                'intellectual_property_title': 'Intellectual Property',
                'intellectual_property_content': 'All elements constituting the site (texts, graphics, software, photographs, images, videos, sounds, plans, logos, brands, etc.) are the exclusive property of the publisher or its partners. Any reproduction, representation, use or adaptation, in any form whatsoever, of all or part of these elements, including computer applications, without the prior written consent of the publisher, is strictly prohibited.',
                'liability_title': 'Liability',
                'liability_content': 'The site publisher cannot be held responsible for direct or indirect damage caused to the user\'s equipment when accessing the site. The user of the site undertakes to access the site using recent equipment, free of viruses and with an up-to-date latest generation browser.',
                'affiliate_links_title': 'Affiliate Links',
                'affiliate_links_content': 'Some links on this site are affiliate links. This means that if you make a purchase through these links, we may receive a commission, at no additional cost to you. These commissions help us fund the maintenance and development of this free service.',
                'changes_title': 'Modification of Legal Notice',
                'changes_content': 'The publisher reserves the right to modify these legal notices at any time. The user is therefore invited to consult them regularly.',
                'back_to_home': 'Back to home',
                
                // Footer
                'footer_text': 'Image resizing tool for Samsung The Frame - Design inspired by Spotify'
            },
            es: {
                // Títulos generales
                'app_title': 'Redimensionador de Imágenes para The Frame',
                'resizer_btn': 'Redimensionador de Imágenes',
                'products_btn': 'Productos Recomendados',
                
                // Pasos
                'steps_title': 'Pasos de Redimensionamiento',
                'step1_title': '1. Sube tu imagen',
                'step1_desc': 'Selecciona tu imagen desde tu dispositivo',
                'step2_title': '2. Selecciona la dimensión',
                'step2_desc': 'Elige tu modelo de TV Samsung The Frame',
                'step3_title': '3. Verifica la vista previa',
                'step3_desc': 'Controla el resultado antes de descargar',
                'step4_title': '4. Descarga',
                'step4_desc': 'Obtén tu imagen perfectamente dimensionada',
                
                // Etiquetas de pasos
                'step1_label': 'Paso 1',
                'step2_label': 'Paso 2',
                'step3_label': 'Paso 3',
                'step4_label': 'Paso 4',
                
                // Sección de subida
                'upload_title': 'Subir tu imagen',
                'upload_text': 'Haz clic para seleccionar tu imagen',
                'continue_step2': 'Continuar al paso 2',
                
                // Sección de dimensiones
                'dimension_title': 'Selecciona la dimensión de tu TV',
                'custom_dimension': 'Personalizado',
                'other_dimension': 'Otra dimensión',
                'custom_dimensions': 'Dimensiones personalizadas',
                'width_placeholder': 'Ancho',
                'height_placeholder': 'Alto',
                'back_step1': 'Volver al paso 1',
                'continue_preview': 'Continuar a la vista previa',
                
                // Sección de vista previa
                'preview_title': 'Vista previa y descarga',
                'preview_placeholder': 'La imagen redimensionada aparecerá aquí',
                'original_dimensions': 'Dimensiones originales:',
                'new_dimensions': 'Nuevas dimensiones:',
                'file_size': 'Tamaño del archivo:',
                'file_format': 'Formato:',
                'back_dimensions': 'Volver a dimensiones',
                'download_resized': 'Descargar imagen redimensionada',
                'restart': 'Comenzar de nuevo',
                'resizing_in_progress': 'Redimensionando...',
                
                // Sección de productos
                'products_title': 'Accesorios Recomendados para Samsung The Frame',
                'products_subtitle': 'Descubre nuestra selección de accesorios compatibles con tu TV The Frame',
                'products_note': 'Nota: Estos son enlaces de afiliados. Si realizas una compra a través de estos enlaces, puedo recibir una pequeña comisión sin costo adicional para ti.',
                
                // Sección legal
                'legal_title': 'Aviso Legal y Política de Privacidad',
                'legal_link': 'Aviso Legal y Política de Privacidad',
                'legal_editor': 'Editor del sitio',
                'legal_editor_content': 'El sitio "Image Resizer para The Frame" es editado por [Nombre de la empresa o individuo], [estatus legal], con un capital de [monto del capital] euros, registrado en el Registro Mercantil de [ciudad] bajo el número [número RCS], cuya sede social está situada en [dirección completa].',
                'legal_publication': 'Director de publicación',
                'legal_publication_content': '[Nombre del director de publicación], en su calidad de [función].',
                'legal_hosting': 'Alojamiento',
                'legal_hosting_content': 'Este sitio está alojado por [Nombre del proveedor de alojamiento], [dirección del proveedor de alojamiento].',
                'legal_contact': 'Contacto',
                'legal_contact_content': 'Para cualquier pregunta o solicitud de información sobre el sitio, o para informar sobre un contenido, el usuario puede contactar al editor en la siguiente dirección de correo electrónico: [dirección de correo electrónico de contacto].',
                'rgpd_title': 'Protección de datos personales y cumplimiento del RGPD',
                'rgpd_data_collection': 'Recopilación de datos',
                'rgpd_data_collection_content': 'El sitio "Image Resizer para The Frame" se compromete a proteger la privacidad de sus usuarios. De conformidad con el Reglamento General de Protección de Datos (RGPD), informamos a nuestros usuarios que:',
                'rgpd_point1': 'Ninguna imagen cargada en este sitio se almacena en nuestros servidores',
                'rgpd_point2': 'El procesamiento de imágenes se realiza completamente en su navegador',
                'rgpd_point3': 'No se recopilan datos personales sin su consentimiento explícito',
                'rgpd_point4': 'No se utilizan cookies de seguimiento en este sitio',
                'rgpd_point5': 'Las imágenes se procesan localmente y nunca salen de su dispositivo',
                'rgpd_data_usage': 'Uso de datos',
                'rgpd_data_usage_content': 'Los únicos datos potencialmente recopilados son datos de navegación anónimos con fines estadísticos, y posiblemente su dirección de correo electrónico si elige contactarnos.',
                'rgpd_user_rights': 'Derechos de los usuarios',
                'rgpd_user_rights_content': 'De conformidad con la normativa aplicable, tiene los siguientes derechos con respecto a sus datos personales:',
                'rgpd_right1': 'Derecho de acceso y rectificación',
                'rgpd_right2': 'Derecho al borrado',
                'rgpd_right3': 'Derecho a la limitación del tratamiento',
                'rgpd_right4': 'Derecho de oposición',
                'rgpd_right5': 'Derecho a la portabilidad de los datos',
                'rgpd_rights_contact': 'Para ejercer estos derechos, puede contactarnos en: [dirección de correo electrónico dedicada a la protección de datos].',
                'cookies_title': 'Cookies',
                'cookies_content': 'Este sitio no utiliza cookies de seguimiento. Solo se pueden utilizar cookies técnicas esenciales para el funcionamiento del sitio, y estas no contienen información personal identificable.',
                'intellectual_property_title': 'Propiedad intelectual',
                'intellectual_property_content': 'Todos los elementos que constituyen el sitio (textos, gráficos, software, fotografías, imágenes, videos, sonidos, planos, logotipos, marcas, etc.) son propiedad exclusiva del editor o de sus socios. Queda estrictamente prohibida cualquier reproducción, representación, uso o adaptación, en cualquier forma que sea, de la totalidad o parte de estos elementos, incluidas las aplicaciones informáticas, sin el acuerdo previo y por escrito del editor.',
                'liability_title': 'Responsabilidad',
                'liability_content': 'El editor del sitio no podrá ser considerado responsable de los daños directos o indirectos causados al equipo del usuario, durante el acceso al sitio. El usuario del sitio se compromete a acceder al sitio utilizando un equipo reciente, que no contenga virus y con un navegador de última generación actualizado.',
                'affiliate_links_title': 'Enlaces de afiliados',
                'affiliate_links_content': 'Algunos enlaces presentes en este sitio son enlaces de afiliados. Esto significa que si realiza una compra a través de estos enlaces, podemos percibir una comisión, sin ningún costo adicional para usted. Estas comisiones nos ayudan a financiar el mantenimiento y desarrollo de este servicio gratuito.',
                'changes_title': 'Modificación del aviso legal',
                'changes_content': 'El editor se reserva el derecho de modificar en cualquier momento el presente aviso legal. Por lo tanto, se invita al usuario a consultarlo regularmente.',
                'back_to_home': 'Volver al inicio',
                
                // Pie de página
                'footer_text': 'Herramienta de redimensionamiento de imágenes para Samsung The Frame - Diseño inspirado en Spotify'
            },
            de: {
                // Allgemeine Titel
                'app_title': 'Bildgrößenänderer für The Frame',
                'resizer_btn': 'Bildgrößenänderer',
                'products_btn': 'Empfohlene Produkte',
                
                // Schritte
                'steps_title': 'Schritte zur Größenänderung',
                'step1_title': '1. Laden Sie Ihr Bild hoch',
                'step1_desc': 'Wählen Sie Ihr Bild von Ihrem Gerät aus',
                'step2_title': '2. Wählen Sie die Dimension',
                'step2_desc': 'Wählen Sie Ihr Samsung The Frame TV-Modell',
                'step3_title': '3. Überprüfen Sie die Vorschau',
                'step3_desc': 'Überprüfen Sie das Ergebnis vor dem Herunterladen',
                'step4_title': '4. Herunterladen',
                'step4_desc': 'Holen Sie sich Ihr perfekt dimensioniertes Bild',
                
                // Schrittbeschriftungen
                'step1_label': 'Schritt 1',
                'step2_label': 'Schritt 2',
                'step3_label': 'Schritt 3',
                'step4_label': 'Schritt 4',
                
                // Upload-Bereich
                'upload_title': 'Laden Sie Ihr Bild hoch',
                'upload_text': 'Klicken Sie, um Ihr Bild auszuwählen',
                'continue_step2': 'Weiter zu Schritt 2',
                
                // Dimensionsbereich
                'dimension_title': 'Wählen Sie Ihre TV-Dimension',
                'custom_dimension': 'Benutzerdefiniert',
                'other_dimension': 'Andere Dimension',
                'custom_dimensions': 'Benutzerdefinierte Dimensionen',
                'width_placeholder': 'Breite',
                'height_placeholder': 'Höhe',
                'back_step1': 'Zurück zu Schritt 1',
                'continue_preview': 'Weiter zur Vorschau',
                
                // Vorschaubereich
                'preview_title': 'Vorschau und Download',
                'preview_placeholder': 'Das angepasste Bild wird hier angezeigt',
                'original_dimensions': 'Originalgröße:',
                'new_dimensions': 'Neue Größe:',
                'file_size': 'Dateigröße:',
                'file_format': 'Format:',
                'back_dimensions': 'Zurück zu Dimensionen',
                'download_resized': 'Angepasstes Bild herunterladen',
                'restart': 'Neu starten',
                'resizing_in_progress': 'Größenänderung läuft...',
                
                // Produkte-Bereich
                'products_title': 'Empfohlenes Zubehör für Samsung The Frame',
                'products_subtitle': 'Entdecken Sie unsere Auswahl an Zubehör, das mit Ihrem The Frame TV kompatibel ist',
                'products_note': 'Hinweis: Dies sind Affiliate-Links. Wenn Sie einen Kauf über diese Links tätigen, erhalte ich möglicherweise eine kleine Provision ohne zusätzliche Kosten für Sie.',
                
                // Rechtsbereich
                'legal_title': 'Impressum & Datenschutzerklärung',
                'legal_link': 'Impressum & Datenschutzerklärung',
                'legal_editor': 'Herausgeber der Website',
                'legal_editor_content': 'Die Website "Bildgrößenänderer für The Frame" wird herausgegeben von [Firmen- oder Einzelpersonenname], [Rechtsstatus], mit einem Kapital von [Kapitalbetrag] Euro, eingetragen im Handelsregister von [Stadt] unter der Nummer [RCS-Nummer], deren eingetragener Sitz sich in [vollständige Adresse] befindet.',
                'legal_publication': 'Veröffentlichungsleiter',
                'legal_publication_content': '[Name des Veröffentlichungsleiters], in seiner Eigenschaft als [Funktion].',
                'legal_hosting': 'Hosting',
                'legal_hosting_content': 'Diese Seite wird gehostet von [Name des Hosting-Anbieters], [Adresse des Hosting-Anbieters].',
                'legal_contact': 'Kontakt',
                'legal_contact_content': 'Bei Fragen oder Informationsanfragen bezüglich der Website oder zur Meldung von Inhalten kann der Nutzer den Herausgeber unter der folgenden E-Mail-Adresse kontaktieren: [Kontakt-E-Mail-Adresse].',
                'rgpd_title': 'Schutz personenbezogener Daten und DSGVO-Konformität',
                'rgpd_data_collection': 'Datenerfassung',
                'rgpd_data_collection_content': 'Die Website "Bildgrößenänderer für The Frame" verpflichtet sich, die Privatsphäre ihrer Nutzer zu schützen. Gemäß der Datenschutz-Grundverordnung (DSGVO) informieren wir unsere Nutzer, dass:',
                'rgpd_point1': 'Keine auf diese Seite hochgeladenen Bilder werden auf unseren Servern gespeichert',
                'rgpd_point2': 'Die Bildverarbeitung erfolgt vollständig in Ihrem Browser',
                'rgpd_point3': 'Ohne Ihre ausdrückliche Zustimmung werden keine personenbezogenen Daten erhoben',
                'rgpd_point4': 'Auf dieser Seite werden keine Tracking-Cookies verwendet',
                'rgpd_point5': 'Bilder werden lokal verarbeitet und verlassen niemals Ihr Gerät',
                'rgpd_data_usage': 'Datennutzung',
                'rgpd_data_usage_content': 'Die einzigen potenziell erfassten Daten sind anonymisierte Navigationsdaten für statistische Zwecke und möglicherweise Ihre E-Mail-Adresse, wenn Sie sich entscheiden, uns zu kontaktieren.',
                'rgpd_user_rights': 'Benutzerrechte',
                'rgpd_user_rights_content': 'Gemäß den geltenden Vorschriften haben Sie folgende Rechte in Bezug auf Ihre personenbezogenen Daten:',
                'rgpd_right1': 'Recht auf Auskunft und Berichtigung',
                'rgpd_right2': 'Recht auf Löschung',
                'rgpd_right3': 'Recht auf Einschränkung der Verarbeitung',
                'rgpd_right4': 'Widerspruchsrecht',
                'rgpd_right5': 'Recht auf Datenübertragbarkeit',
                'rgpd_rights_contact': 'Um diese Rechte auszuüben, können Sie uns unter folgender Adresse kontaktieren: [für den Datenschutz zuständige E-Mail-Adresse].',
                'cookies_title': 'Cookies',
                'cookies_content': 'Diese Seite verwendet keine Tracking-Cookies. Es können nur technische Cookies verwendet werden, die für die Funktion der Seite wesentlich sind und keine identifizierbaren persönlichen Informationen enthalten.',
                'intellectual_property_title': 'Geistiges Eigentum',
                'intellectual_property_content': 'Alle Elemente, die die Seite bilden (Texte, Grafiken, Software, Fotografien, Bilder, Videos, Sounds, Pläne, Logos, Marken usw.) sind ausschließliches Eigentum des Herausgebers oder seiner Partner. Jede Vervielfältigung, Darstellung, Verwendung oder Anpassung, in welcher Form auch immer, aller oder eines Teils dieser Elemente, einschließlich Computeranwendungen, ohne vorherige schriftliche Zustimmung des Herausgebers, ist strengstens untersagt.',
                'liability_title': 'Haftung',
                'liability_content': 'Der Herausgeber der Seite kann nicht für direkte oder indirekte Schäden haftbar gemacht werden, die der Ausrüstung des Benutzers beim Zugriff auf die Seite entstehen. Der Benutzer der Seite verpflichtet sich, mit einer aktuellen, virenfreien Ausrüstung und einem aktualisierten Browser der neuesten Generation auf die Seite zuzugreifen.',
                'affiliate_links_title': 'Affiliate-Links',
                'affiliate_links_content': 'Einige Links auf dieser Seite sind Affiliate-Links. Das bedeutet, dass wir eine Provision erhalten können, wenn Sie einen Kauf über diese Links tätigen, ohne dass Ihnen zusätzliche Kosten entstehen. Diese Provisionen helfen uns, die Wartung und Entwicklung dieses kostenlosen Dienstes zu finanzieren.',
                'changes_title': 'Änderung des Impressums',
                'changes_content': 'Der Herausgeber behält sich das Recht vor, dieses Impressum jederzeit zu ändern. Der Benutzer wird daher eingeladen, es regelmäßig zu konsultieren.',
                'back_to_home': 'Zurück zur Startseite',
                
                // Fußzeile
                'footer_text': 'Bildgrößenänderungstool für Samsung The Frame - Design inspiriert von Spotify'
            }
        };

        // Données des produits
        const products = [
            {
                id: 1,
                name: "Support mural sans fil Samsung",
                category: "Support",
                description: "Support mural officiel Samsung pour une installation élégante et sans fil de votre TV The Frame.",
                price: "€89,99",
                image: "https://images.samsung.com/is/image/samsung/p5/fr/tvs/the-frame/accessories/wm45b-wall-mount-kit.png",
                link: "https://www.amazon.fr/dp/B08C1Y7W5H"
            },
            {
                id: 2,
                name: "Cadres décoratifs interchangeables",
                category: "Cadres",
                description: "Collection de cadres colorés pour personnaliser l'apparence de votre TV The Frame selon votre décoration.",
                price: "À partir de €99",
                image: "https://images.samsung.com/is/image/samsung/p5/fr/tvs/the-frame/accessories/bezel-studio-gray.png",
                link: "https://www.amazon.fr/dp/B08C1ZQ6L7"
            },
            {
                id: 3,
                name: "Câble One Connect invisible 5m",
                category: "Câbles",
                description: "Câble de connexion longueur 5m pour relier votre TV The Frame au boîtier One Connect sans encombrement visible.",
                price: "€129,99",
                image: "https://images.samsung.com/is/image/samsung/p5/fr/tvs/the-frame/accessories/one-connect-cable-5m.png",
                link: "https://www.amazon.fr/dp/B08C1ZQ6L8"
            },
            {
                id: 4,
                name: "Kit de nettoyage écran premium",
                category: "Entretien",
                description: "Kit spécialement conçu pour nettoyer en toute sécurité l'écran de votre TV The Frame sans laisser de traces.",
                price: "€24,99",
                image: "https://m.media-amazon.com/images/I/71K8Fg+L7SL._AC_SL1500_.jpg",
                link: "https://www.amazon.fr/dp/B08C1ZQ6L9"
            },
            {
                id: 5,
                name: "Support pivotant universel",
                category: "Support",
                description: "Support mural pivotant permettant d'ajuster l'angle de vision de votre TV The Frame selon vos besoins.",
                price: "€59,99",
                image: "https://m.media-amazon.com/images/I/71z9Vf8Jw2L._AC_SL1500_.jpg",
                link: "https://www.amazon.fr/dp/B08C1ZQ6M0"
            },
            {
                id: 6,
                name: "Barre de son Samsung HW-Q600A",
                category: "Audio",
                description: "Barre de son compatible avec votre TV The Frame pour une expérience audio immersive et de qualité.",
                price: "€399,99",
                image: "https://images.samsung.com/is/image/samsung/p5/fr/audio/hw-q600a-za-front-black-01.png",
                link: "https://www.amazon.fr/dp/B08C1ZQ6M1"
            }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            // Références aux éléments DOM
            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            const selectedFilesContainer = document.getElementById('selectedFiles');
            const dimensionOptions = document.querySelectorAll('.dimension-option');
            const customDimension = document.getElementById('customDimension');
            const customWidth = document.getElementById('customWidth');
            const customHeight = document.getElementById('customHeight');
            const previewCanvas = document.getElementById('previewCanvas');
            const ctx = previewCanvas.getContext('2d');
            const placeholderText = document.getElementById('placeholderText');
            const downloadBtn = document.getElementById('downloadBtn');
            const originalDimensions = document.getElementById('originalDimensions');
            const newDimensions = document.getElementById('newDimensions');
            const fileSize = document.getElementById('fileSize');
            const fileFormat = document.getElementById('fileFormat');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const progressBar = document.getElementById('progressBar');
            const productsGrid = document.getElementById('productsGrid');
            const legalLink = document.getElementById('legalLink');
            const backFromLegalBtn = document.getElementById('backFromLegalBtn');
            
            // Boutons de navigation
            const nextStep1Btn = document.getElementById('nextStep1Btn');
            const prevStep2Btn = document.getElementById('prevStep2Btn');
            const nextStep2Btn = document.getElementById('nextStep2Btn');
            const prevStep3Btn = document.getElementById('prevStep3Btn');
            const restartBtn = document.getElementById('restartBtn');
            
            // Navigation des étapes
            const stepNavPrev = document.getElementById('stepNavPrev');
            const stepNavNext = document.getElementById('stepNavNext');
            const cardsContainer = document.getElementById('cardsContainer');
            
            // Sections de contenu
            const step1Content = document.getElementById('step1Content');
            const step2Content = document.getElementById('step2Content');
            const step3Content = document.getElementById('step3Content');
            
            // Cartes d'étapes
            const step1Card = document.getElementById('step1Card');
            const step2Card = document.getElementById('step2Card');
            const step3Card = document.getElementById('step3Card');
            const step4Card = document.getElementById('step4Card');
            
            // Navigation principale
            const resizerBtn = document.getElementById('resizerBtn');
            const productsBtn = document.getElementById('productsBtn');
            const resizerSection = document.getElementById('resizerSection');
            const productsSection = document.getElementById('productsSection');
            const legalSection = document.getElementById('legalSection');
            
            // Sélecteur de langue
            const languageSelect = document.getElementById('languageSelect');
            
            let selectedFile = null;
            let originalImage = null;
            let resizedImage = null;
            let targetWidth = 1920;
            let targetHeight = 1080;
            let currentStep = 1;
            let currentLanguage = 'fr';
            
            // Fonction pour générer les produits
            function generateProducts() {
                productsGrid.innerHTML = '';
                
                products.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.src='https://via.placeholder.com/300x200/282828/FFFFFF?text=Image+Non+Disponible'">
                        <div class="product-content">
                            <div class="product-category">${product.category}</div>
                            <h3 class="product-name">${product.name}</h3>
                            <p class="product-description">${product.description}</p>
                            <div class="product-price">${product.price}</div>
                            <a href="${product.link}" class="product-link" target="_blank" data-translate="view_product">Voir le produit</a>
                        </div>
                    `;
                    productsGrid.appendChild(productCard);
                });
            }
            
            // Fonction de traduction
            function translatePage(lang) {
                currentLanguage = lang;
                
                // Mettre à jour tous les éléments avec data-translate
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translations[lang] && translations[lang][key]) {
                        element.textContent = translations[lang][key];
                    }
                });
                
                // Mettre à jour les placeholders
                document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                    const key = element.getAttribute('data-translate-placeholder');
                    if (translations[lang] && translations[lang][key]) {
                        element.placeholder = translations[lang][key];
                    }
                });
                
                // Mettre à jour les textes dans les boutons avec des icônes
                const downloadBtnText = document.querySelector('#downloadBtn span');
                if (downloadBtnText && translations[lang] && translations[lang]['download_resized']) {
                    downloadBtnText.textContent = translations[lang]['download_resized'];
                }
                
                const restartBtnText = document.querySelector('#restartBtn span');
                if (restartBtnText && translations[lang] && translations[lang]['restart']) {
                    restartBtnText.textContent = translations[lang]['restart'];
                }
                
                // Mettre à jour le sélecteur de langue
                languageSelect.value = lang;
                
                // Sauvegarder la langue dans le localStorage
                localStorage.setItem('language', lang);
            }
            
            // Mettre à jour la barre de progression
            function updateProgressBar() {
                const progress = (currentStep / 4) * 100;
                progressBar.style.width = `${progress}%`;
            }
            
            // Navigation entre les étapes
            function goToStep(step) {
                // Masquer toutes les sections
                step1Content.classList.add('section-hidden');
                step2Content.classList.add('section-hidden');
                step3Content.classList.add('section-hidden');
                
                // Désactiver toutes les cartes
                step1Card.classList.remove('active', 'completed');
                step2Card.classList.remove('active', 'completed');
                step3Card.classList.remove('active', 'completed');
                step4Card.classList.remove('active', 'completed');
                
                // Afficher la section correspondante et activer la carte
                if (step === 1) {
                    step1Content.classList.remove('section-hidden');
                    step1Card.classList.add('active');
                    currentStep = 1;
                } else if (step === 2) {
                    step2Content.classList.remove('section-hidden');
                    step1Card.classList.add('completed');
                    step2Card.classList.add('active');
                    currentStep = 2;
                } else if (step === 3) {
                    step3Content.classList.remove('section-hidden');
                    step1Card.classList.add('completed');
                    step2Card.classList.add('completed');
                    step3Card.classList.add('active');
                    currentStep = 3;
                    
                    // Redimensionner l'image quand on arrive à l'étape 3
                    resizeImage();
                }
                
                updateProgressBar();
            }
            
            // Événements de navigation
            nextStep1Btn.addEventListener('click', () => goToStep(2));
            prevStep2Btn.addEventListener('click', () => goToStep(1));
            nextStep2Btn.addEventListener('click', () => goToStep(3));
            prevStep3Btn.addEventListener('click', () => goToStep(2));
            restartBtn.addEventListener('click', () => {
                // Réinitialiser l'application
                selectedFile = null;
                originalImage = null;
                resizedImage = null;
                selectedFilesContainer.innerHTML = '';
                uploadArea.innerHTML = `
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p data-translate="upload_text">Cliquez pour sélectionner votre image</p>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;">
                `;
                // Retraduire le texte de l'upload area
                const uploadText = uploadArea.querySelector('p');
                if (uploadText && translations[currentLanguage] && translations[currentLanguage]['upload_text']) {
                    uploadText.textContent = translations[currentLanguage]['upload_text'];
                }
                
                nextStep1Btn.disabled = true;
                downloadBtn.disabled = true;
                placeholderText.style.display = 'block';
                goToStep(1);
            });
            
            // Navigation des étapes avec les flèches
            stepNavPrev.addEventListener('click', () => {
                cardsContainer.scrollBy({
                    left: -250,
                    behavior: 'smooth'
                });
            });
            
            stepNavNext.addEventListener('click', () => {
                cardsContainer.scrollBy({
                    left: 250,
                    behavior: 'smooth'
                });
            });
            
            // Navigation principale
            resizerBtn.addEventListener('click', () => {
                resizerBtn.classList.add('active');
                productsBtn.classList.remove('active');
                resizerSection.classList.remove('section-hidden');
                productsSection.classList.add('section-hidden');
                legalSection.classList.add('section-hidden');
            });
            
            productsBtn.addEventListener('click', () => {
                productsBtn.classList.add('active');
                resizerBtn.classList.remove('active');
                productsSection.classList.remove('section-hidden');
                resizerSection.classList.add('section-hidden');
                legalSection.classList.add('section-hidden');
            });
            
            // Navigation vers les mentions légales
            legalLink.addEventListener('click', (e) => {
                e.preventDefault();
                resizerBtn.classList.remove('active');
                productsBtn.classList.remove('active');
                legalSection.classList.remove('section-hidden');
                resizerSection.classList.add('section-hidden');
                productsSection.classList.add('section-hidden');
            });
            
            // Retour depuis les mentions légales
            backFromLegalBtn.addEventListener('click', () => {
                resizerBtn.classList.add('active');
                productsBtn.classList.remove('active');
                resizerSection.classList.remove('section-hidden');
                productsSection.classList.add('section-hidden');
                legalSection.classList.add('section-hidden');
            });
            
            // Gestion du glisser-déposer et du clic pour télécharger
            uploadArea.addEventListener('click', () => fileInput.click());
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--spotify-green)';
                uploadArea.style.backgroundColor = 'rgba(29, 185, 84, 0.05)';
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.style.borderColor = 'var(--spotify-dark-gray)';
                uploadArea.style.backgroundColor = '';
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--spotify-dark-gray)';
                uploadArea.style.backgroundColor = '';
                
                if (e.dataTransfer.files.length) {
                    handleFile(e.dataTransfer.files[0]);
                }
            });
            
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    handleFile(e.target.files[0]);
                }
            });
            
            // Gestion de la sélection des dimensions
            dimensionOptions.forEach(option => {
                option.addEventListener('click', function() {
                    dimensionOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    if (this.id === 'customOption') {
                        customDimension.style.display = 'block';
                        targetWidth = parseInt(customWidth.value) || 1920;
                        targetHeight = parseInt(customHeight.value) || 1080;
                    } else {
                        customDimension.style.display = 'none';
                        targetWidth = parseInt(this.dataset.width);
                        targetHeight = parseInt(this.dataset.height);
                    }
                    
                    // Mettre à jour les nouvelles dimensions affichées
                    newDimensions.textContent = `${targetWidth} × ${targetHeight}`;
                });
            });
            
            // Mise à jour des dimensions personnalisées
            customWidth.addEventListener('input', function() {
                targetWidth = parseInt(this.value) || 1920;
                newDimensions.textContent = `${targetWidth} × ${targetHeight}`;
            });
            
            customHeight.addEventListener('input', function() {
                targetHeight = parseInt(this.value) || 1080;
                newDimensions.textContent = `${targetWidth} × ${targetHeight}`;
            });
            
            // Fonction pour gérer le fichier sélectionné
            function handleFile(file) {
                if (!file.type.match('image.*')) {
                    alert('Veuillez sélectionner un fichier image.');
                    return;
                }
                
                selectedFile = file;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    originalImage = new Image();
                    originalImage.onload = function() {
                        originalDimensions.textContent = `${originalImage.width} × ${originalImage.height}`;
                        fileSize.textContent = formatFileSize(file.size);
                        fileFormat.textContent = file.type.split('/')[1].toUpperCase();
                    };
                    originalImage.src = e.target.result;
                };
                reader.readAsDataURL(file);
                
                updateSelectedFilesList();
                
                // Activer le bouton pour passer à l'étape suivante
                nextStep1Btn.disabled = false;
            }
            
            // Mettre à jour la liste des fichiers sélectionnés
            function updateSelectedFilesList() {
                selectedFilesContainer.innerHTML = '';
                
                if (!selectedFile) {
                    uploadArea.innerHTML = `
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p data-translate="upload_text">Cliquez pour sélectionner votre image</p>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    `;
                    // Retraduire le texte de l'upload area
                    const uploadText = uploadArea.querySelector('p');
                    if (uploadText && translations[currentLanguage] && translations[currentLanguage]['upload_text']) {
                        uploadText.textContent = translations[currentLanguage]['upload_text'];
                    }
                    return;
                }
                
                const fileSelectedText = translations[currentLanguage] && translations[currentLanguage]['upload_text'] 
                    ? translations[currentLanguage]['upload_text'] 
                    : 'Fichier sélectionné';
                    
                const clickToChangeText = translations[currentLanguage] && translations[currentLanguage]['upload_text'] 
                    ? 'Cliquez pour changer'
                    : 'Click to change';
                
                uploadArea.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    <p>${fileSelectedText}: ${selectedFile.name}</p>
                    <p style="font-size: 0.8rem; margin-top: 10px; color: var(--spotify-green);">${clickToChangeText}</p>
                `;
                
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <i class="fas fa-image file-icon"></i>
                        <span class="file-name">${selectedFile.name}</span>
                    </div>
                    <button class="remove-file" id="removeFileBtn">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                selectedFilesContainer.appendChild(fileItem);
                
                // Ajouter l'événement de suppression
                document.getElementById('removeFileBtn').addEventListener('click', function() {
                    selectedFile = null;
                    originalImage = null;
                    updateSelectedFilesList();
                    nextStep1Btn.disabled = true;
                    placeholderText.style.display = 'block';
                });
            }
            
            // Fonction pour dessiner une image en conservant le ratio (sans rogner)
            function drawImageProp(ctx, img, x, y, w, h, offsetX, offsetY) {
                if (arguments.length === 2) {
                    x = y = 0;
                    w = ctx.canvas.width;
                    h = ctx.canvas.height;
                }
                
                // default offset is center
                offsetX = typeof offsetX === "number" ? offsetX : 0.5;
                offsetY = typeof offsetY === "number" ? offsetY : 0.5;
                
                // keep bounds [0.0, 1.0]
                if (offsetX < 0) offsetX = 0;
                if (offsetY < 0) offsetY = 0;
                if (offsetX > 1) offsetX = 1;
                if (offsetY > 1) offsetY = 1;
                
                var iw = img.width,
                    ih = img.height,
                    r = Math.min(w / iw, h / ih),
                    nw = iw * r,   // new prop. width
                    nh = ih * r,   // new prop. height
                    cx, cy, cw, ch, ar = 1;
                
                // decide which gap to fill    
                if (nw < w) ar = w / nw;                             
                if (Math.abs(ar - 1) < 1e-14 && nh < h) ar = h / nh;  // updated
                nw *= ar;
                nh *= ar;
                
                // calc source rectangle
                cw = iw / (nw / w);
                ch = ih / (nh / h);
                
                cx = (iw - cw) * offsetX;
                cy = (ih - ch) * offsetY;
                
                // make sure source rectangle is valid
                if (cx < 0) cx = 0;
                if (cy < 0) cy = 0;
                if (cw > iw) cw = iw;
                if (ch > ih) ch = ih;
                
                // fill image in dest. rectangle
                ctx.drawImage(img, cx, cy, cw, ch,  x, y, w, h);
            }
            
            // Fonction de redimensionnement
            function resizeImage() {
                if (!originalImage) return;
                
                loadingIndicator.style.display = 'block';
                
                // Simuler un temps de traitement
                setTimeout(() => {
                    // Créer un canvas pour l'image finale
                    const canvas = document.createElement('canvas');
                    canvas.width = targetWidth;
                    canvas.height = targetHeight;
                    const ctx = canvas.getContext('2d');
                    
                    // Remplir le fond avec une couleur noire (pour les bandes si nécessaire)
                    ctx.fillStyle = 'black';
                    ctx.fillRect(0, 0, targetWidth, targetHeight);
                    
                    // Dessiner l'image redimensionnée en conservant le ratio
                    drawImageProp(ctx, originalImage, 0, 0, targetWidth, targetHeight);
                    
                    resizedImage = canvas;
                    
                    // Afficher l'aperçu
                    showPreview();
                    
                    // Activer le bouton de téléchargement
                    downloadBtn.disabled = false;
                    loadingIndicator.style.display = 'none';
                    
                    // Marquer l'étape 3 comme terminée
                    step3Card.classList.add('completed');
                    step4Card.classList.add('active');
                    currentStep = 4;
                    updateProgressBar();
                }, 1000);
            }
            
            // Afficher l'aperçu
            function showPreview() {
                if (!resizedImage) return;
                
                // Définir la taille du canvas pour l'aperçu
                previewCanvas.width = Math.min(targetWidth, 500);
                previewCanvas.height = Math.min(targetHeight, 300);
                
                // Redessiner l'image en conservant le ratio (sans rogner)
                ctx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);
                drawImageProp(ctx, resizedImage, 0, 0, previewCanvas.width, previewCanvas.height);
                
                // Mettre à jour les informations
                newDimensions.textContent = `${targetWidth} × ${targetHeight}`;
                
                placeholderText.style.display = 'none';
            }
            
            // Gestion du téléchargement
            downloadBtn.addEventListener('click', function() {
                if (!resizedImage) return;
                
                resizedImage.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `theframe_${targetWidth}x${targetHeight}_${selectedFile.name}`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 'image/jpeg', 0.95);
            }
            
            // Fonction utilitaire pour formater la taille du fichier
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // Gestion du changement de langue
            languageSelect.addEventListener('change', function() {
                const selectedLanguage = this.value;
                translatePage(selectedLanguage);
                
                // Mettre à jour les textes dynamiques
                if (selectedFile) {
                    updateSelectedFilesList();
                }
            });
            
            // Initialiser la langue depuis le localStorage ou utiliser le français par défaut
            const savedLanguage = localStorage.getItem('language') || 'fr';
            languageSelect.value = savedLanguage;
            translatePage(savedLanguage);
            
            // Générer les produits
            generateProducts();
            
            // Initialiser la barre de progression
            updateProgressBar();
        });
    </script>
</body>
</html>