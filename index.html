<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Resizer pour The Frame</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --spotify-black: #191414;
            --spotify-dark: #1e1e1e;
            --spotify-light-black: #282828;
            --spotify-green: #1DB954;
            --spotify-white: #FFFFFF;
            --spotify-gray: #b3b3b3;
            --spotify-dark-gray: #535353;
            --accent-blue: #2D46B9;
            --accent-purple: #AF2896;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--spotify-black);
            color: var(--spotify-white);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--spotify-dark-gray);
            position: relative;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
        }
        
        /* Language Selector */
        .language-selector {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .language-selector select {
            background-color: var(--spotify-light-black);
            color: var(--spotify-white);
            border: 1px solid var(--spotify-dark-gray);
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        .language-selector select:focus {
            outline: none;
            border-color: var(--spotify-green);
        }
        
        /* Navigation */
        .main-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background-color: var(--spotify-light-black);
            color: var(--spotify-white);
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s;
            margin: 0 10px 10px;
        }
        
        .nav-btn:hover {
            background-color: var(--spotify-green);
            color: var(--spotify-black);
        }
        
        .nav-btn.active {
            background-color: var(--spotify-green);
            color: var(--spotify-black);
        }
        
        /* Cards Section */
        .cards-section {
            margin-bottom: 20px;
            position: relative;
        }
        
        .section-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-align: center;
        }
        
        .cards-container-wrapper {
            position: relative;
            overflow: hidden;
        }
        
        .cards-container {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 10px;
            scroll-behavior: smooth;
            scrollbar-width: none; /* Firefox */
        }
        
        .cards-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Edge */
        }
        
        .card {
            background-color: var(--spotify-light-black);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-width: 250px;
            flex-shrink: 0;
        }
        
        .card.active {
            border: 2px solid var(--spotify-green);
        }
        
        .card.completed::after {
            content: '✓';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 25px;
            height: 25px;
            background-color: var(--spotify-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--spotify-black);
        }
        
        .card:hover {
            background-color: #3a3a3a;
            transform: translateY(-5px);
        }
        
        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .upload-icon {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
        }
        
        .dimension-icon {
            background: linear-gradient(135deg, var(--spotify-green), #1ed760);
        }
        
        .preview-icon {
            background: linear-gradient(135deg, #ff9a00, #ff6a00);
        }
        
        .download-icon {
            background: linear-gradient(135deg, #ff375f, #ff2e6c);
        }
        
        .card h3 {
            font-size: 1rem;
            margin-bottom: 8px;
        }
        
        .card p {
            color: var(--spotify-gray);
            font-size: 0.85rem;
        }
        
        /* Navigation arrows for steps */
        .step-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 35px;
            height: 35px;
            background-color: rgba(0, 0, 0, 0.5);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s;
            opacity: 0.7;
        }
        
        .step-nav:hover {
            opacity: 1;
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .step-nav.prev {
            left: 5px;
        }
        
        .step-nav.next {
            right: 5px;
        }
        
        .step-nav:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .step-nav:disabled:hover {
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        /* Progress bar - repositionnée entre les étapes et le contenu */
        .progress-section {
            margin: 25px 0;
            padding: 0 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: var(--spotify-dark-gray);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--spotify-green));
            border-radius: 3px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.8rem;
            color: var(--spotify-gray);
        }
        
        /* Content sections */
        .content-section {
            background: linear-gradient(180deg, #3a3a3a 0%, var(--spotify-dark) 100%);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        /* Upload section */
        .upload-area {
            border: 2px dashed var(--spotify-dark-gray);
            border-radius: 8px;
            padding: 40px 15px;
            text-align: center;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upload-area:hover {
            border-color: var(--spotify-green);
            background-color: rgba(29, 185, 84, 0.05);
        }
        
        .upload-area i {
            font-size: 2.5rem;
            color: var(--spotify-green);
            margin-bottom: 10px;
        }
        
        .upload-area p {
            font-size: 0.9rem;
        }
        
        /* Selected files */
        .selected-files {
            margin-top: 15px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: var(--spotify-light-black);
            border-radius: 4px;
            margin-bottom: 8px;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
            overflow: hidden;
        }
        
        .file-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }
        
        .file-icon {
            color: var(--spotify-green);
        }
        
        .remove-file {
            background: none;
            border: none;
            color: var(--spotify-gray);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .remove-file:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--spotify-white);
        }
        
        /* Dimension selector */
        .dimension-selector {
            margin-top: 20px;
        }
        
        .dimension-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .dimension-option {
            background-color: var(--spotify-light-black);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        
        .dimension-option:hover {
            transform: translateY(-3px);
            background-color: #3a3a3a;
        }
        
        .dimension-option.active {
            border-color: var(--spotify-green);
            background-color: rgba(29, 185, 84, 0.1);
        }
        
        .dimension-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .dimension-size {
            font-size: 0.8rem;
            color: var(--spotify-gray);
        }
        
        .custom-dimension {
            margin-top: 15px;
            display: none;
        }
        
        .custom-inputs {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .custom-inputs input {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 4px;
            background-color: var(--spotify-light-black);
            color: var(--spotify-white);
            font-size: 0.9rem;
        }
        
        input::placeholder {
            color: var(--spotify-gray);
        }
        
        button {
            background-color: var(--spotify-green);
            color: var(--spotify-black);
            border: none;
            padding: 12px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 700;
            transition: all 0.3s;
            margin-top: 15px;
            width: 100%;
            letter-spacing: 1px;
        }
        
        button:hover {
            background-color: #1ed760;
            transform: scale(1.03);
        }
        
        .download-btn {
            background-color: var(--accent-blue);
            color: white;
        }
        
        .download-btn:hover {
            background-color: #3a5bd9;
        }
        
        /* Preview section */
        .preview-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 250px;
            background-color: var(--spotify-black);
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
            position: relative;
        }
        
        #previewImage {
            max-width: 100%;
            max-height: 100%;
            display: none;
        }
        
        .preview-info {
            background-color: var(--spotify-light-black);
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .info-label {
            font-weight: bold;
            color: var(--spotify-gray);
        }
        
        /* Products Section */
        .products-section {
            background: linear-gradient(180deg, #3a3a3a 0%, var(--spotify-dark) 100%);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .products-title {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
        }
        
        .products-subtitle {
            text-align: center;
            margin-bottom: 30px;
            color: var(--spotify-gray);
            font-size: 1.1rem;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .product-card {
            background-color: var(--spotify-light-black);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.2);
        }
        
        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid var(--spotify-dark-gray);
        }
        
        .product-content {
            padding: 20px;
        }
        
        .product-category {
            color: var(--spotify-green);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .product-name {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .product-description {
            color: var(--spotify-gray);
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .product-price {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--spotify-green);
        }
        
        .product-link {
            display: block;
            background-color: var(--spotify-green);
            color: var(--spotify-black);
            text-align: center;
            padding: 12px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s;
        }
        
        .product-link:hover {
            background-color: #1ed760;
            transform: scale(1.03);
        }
        
        /* Legal Section */
        .legal-section {
            background: linear-gradient(180deg, #3a3a3a 0%, var(--spotify-dark) 100%);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .legal-title {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
        }
        
        .legal-content {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .legal-section h2 {
            margin: 25px 0 15px;
            color: var(--spotify-green);
            font-size: 1.4rem;
        }
        
        .legal-section h3 {
            margin: 20px 0 12px;
            font-size: 1.2rem;
        }
        
        .legal-section p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .legal-section ul {
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .legal-section li {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        .highlight-box {
            background-color: var(--spotify-light-black);
            border-left: 4px solid var(--spotify-green);
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        /* Footer */
        footer {
            background-color: var(--spotify-black);
            padding: 15px 0;
            margin-top: 30px;
            text-align: center;
            color: var(--spotify-gray);
            border-top: 1px solid var(--spotify-dark-gray);
            font-size: 0.8rem;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        
        .footer-link {
            color: var(--spotify-gray);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-link:hover {
            color: var(--spotify-green);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
            }
            
            .language-selector {
                position: static;
                transform: none;
                align-self: flex-end;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .dimension-options {
                grid-template-columns: 1fr;
            }
            
            .custom-inputs {
                flex-direction: column;
            }
            
            .step-nav {
                display: none;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .preview-container {
                height: 200px;
            }
            
            .footer-links {
                flex-direction: column;
                gap: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .logo h1 {
                font-size: 1.3rem;
            }
            
            .card {
                min-width: 220px;
                padding: 12px;
            }
            
            .main-nav {
                flex-direction: column;
                gap: 10px;
            }
            
            .nav-btn {
                margin: 5px 0;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Loading animation */
        .loading {
            display: none;
            text-align: center;
            margin: 15px 0;
        }
        
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: var(--spotify-green);
            border-radius: 50%;
            width: 35px;
            height: 35px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .action-buttons button {
            margin-top: 0;
        }
        
        .restart-btn {
            background-color: var(--spotify-dark-gray);
            color: var(--spotify-white);
        }
        
        .restart-btn:hover {
            background-color: var(--spotify-gray);
        }
        
        /* Hide sections by default */
        .section-hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-tv"></i>
                </div>
                <h1 data-translate="app_title">Image Resizer pour The Frame</h1>
            </div>
            
            <!-- Language Selector -->
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="fr">Français</option>
                    <option value="en">English</option>
                    <option value="es">Español</option>
                    <option value="de">Deutsch</option>
                </select>
            </div>
        </div>

        <!-- Navigation -->
        <div class="main-nav">
            <button class="nav-btn active" id="resizerBtn" data-translate="resizer_btn">Redimensionneur d'images</button>
            <button class="nav-btn" id="productsBtn" data-translate="products_btn">Produits recommandés</button>
            <button class="nav-btn" id="legalBtn" data-translate="legal_btn">Mentions légales</button>
        </div>

        <!-- Resizer Section -->
        <div id="resizerSection">
            <!-- Cards Section -->
            <div class="cards-section">
                <h2 class="section-title" data-translate="steps_title">Étapes de redimensionnement</h2>
                <div class="cards-container-wrapper">
                    <button class="step-nav prev" id="stepNavPrev">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="cards-container" id="cardsContainer">
                        <div class="card active" id="step1Card">
                            <div class="card-icon upload-icon">
                                <i class="fas fa-upload"></i>
                            </div>
                            <h3 data-translate="step1_title">1. Téléchargez votre image</h3>
                            <p data-translate="step1_desc">Sélectionnez votre image depuis votre appareil</p>
                        </div>
                        <div class="card" id="step2Card">
                            <div class="card-icon dimension-icon">
                                <i class="fas fa-expand-alt"></i>
                            </div>
                            <h3 data-translate="step2_title">2. Sélectionnez la dimension</h3>
                            <p data-translate="step2_desc">Choisissez le modèle de votre TV The Frame Samsung</p>
                        </div>
                        <div class="card" id="step3Card">
                            <div class="card-icon preview-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <h3 data-translate="step3_title">3. Vérifiez l'aperçu</h3>
                            <p data-translate="step3_desc">Contrôlez le résultat avant le téléchargement</p>
                        </div>
                        <div class="card" id="step4Card">
                            <div class="card-icon download-icon">
                                <i class="fas fa-download"></i>
                            </div>
                            <h3 data-translate="step4_title">4. Téléchargez</h3>
                            <p data-translate="step4_desc">Récupérez votre image parfaitement dimensionnée</p>
                        </div>
                    </div>
                    <button class="step-nav next" id="stepNavNext">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Progress Bar - repositionnée entre les étapes et le contenu -->
            <div class="progress-section">
                <div class="progress-bar">
                    <div class="progress" id="progressBar"></div>
                </div>
                <div class="progress-labels">
                    <span data-translate="step1_label">Étape 1</span>
                    <span data-translate="step2_label">Étape 2</span>
                    <span data-translate="step3_label">Étape 3</span>
                    <span data-translate="step4_label">Étape 4</span>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="content-section" id="step1Content">
                <h2 class="section-title" data-translate="upload_title">Télécharger votre image</h2>
                
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p data-translate="upload_text">Cliquez pour sélectionner votre image</p>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;">
                </div>
                
                <div class="selected-files" id="selectedFiles"></div>
                
                <button id="nextStep1Btn" disabled data-translate="continue_step2">Continuer vers l'étape 2</button>
            </div>
            
            <!-- Dimension Selection Section -->
            <div class="content-section section-hidden" id="step2Content">
                <h2 class="section-title" data-translate="dimension_title">Sélectionnez la dimension de votre TV</h2>
                
                <div class="dimension-options">
                    <div class="dimension-option active" data-width="1920" data-height="1080">
                        <div class="dimension-name">43"</div>
                        <div class="dimension-size">1920 × 1080</div>
                    </div>
                    <div class="dimension-option" data-width="3840" data-height="2160">
                        <div class="dimension-name">50"</div>
                        <div class="dimension-size">3840 × 2160</div>
                    </div>
                    <div class="dimension-option" data-width="3840" data-height="2160">
                        <div class="dimension-name">55"</div>
                        <div class="dimension-size">3840 × 2160</div>
                    </div>
                    <div class="dimension-option" data-width="3840" data-height="2160">
                        <div class="dimension-name">65"</div>
                        <div class="dimension-size">3840 × 2160</div>
                    </div>
                    <div class="dimension-option" data-width="3840" data-height="2160">
                        <div class="dimension-name">75"</div>
                        <div class="dimension-size">3840 × 2160</div>
                    </div>
                    <div class="dimension-option" id="customOption">
                        <div class="dimension-name" data-translate="custom_dimension">Personnalisé</div>
                        <div class="dimension-size" data-translate="other_dimension">Autre dimension</div>
                    </div>
                </div>
                
                <div class="custom-dimension" id="customDimension">
                    <h4 data-translate="custom_dimensions">Dimensions personnalisées</h4>
                    <div class="custom-inputs">
                        <input type="number" id="customWidth" placeholder="Largeur" min="1" data-translate-placeholder="width_placeholder">
                        <input type="number" id="customHeight" placeholder="Hauteur" min="1" data-translate-placeholder="height_placeholder">
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="prevStep2Btn" data-translate="back_step1">Retour à l'étape 1</button>
                    <button id="nextStep2Btn" data-translate="continue_preview">Continuer vers l'aperçu</button>
                </div>
            </div>
            
            <!-- Preview Section -->
            <div class="content-section section-hidden" id="step3Content">
                <h2 class="section-title" data-translate="preview_title">Aperçu et téléchargement</h2>
                
                <div class="preview-container">
                    <canvas id="previewCanvas"></canvas>
                    <p id="placeholderText" data-translate="preview_placeholder">L'image redimensionnée apparaîtra ici</p>
                </div>
                
                <div class="preview-info">
                    <div class="info-item">
                        <span class="info-label" data-translate="original_dimensions">Dimensions originales:</span>
                        <span id="originalDimensions">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label" data-translate="new_dimensions">Nouvelles dimensions:</span>
                        <span id="newDimensions">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label" data-translate="file_size">Taille du fichier:</span>
                        <span id="fileSize">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label" data-translate="file_format">Format:</span>
                        <span id="fileFormat">-</span>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="prevStep3Btn" data-translate="back_dimensions">Retour aux dimensions</button>
                    <button class="download-btn" id="downloadBtn" disabled>
                        <i class="fas fa-download"></i> <span data-translate="download_resized">Télécharger l'image redimensionnée</span>
                    </button>
                    <button class="restart-btn" id="restartBtn">
                        <i class="fas fa-redo"></i> <span data-translate="restart">Recommencer</span>
                    </button>
                </div>
                
                <div class="loading" id="loadingIndicator">
                    <div class="spinner"></div>
                    <p data-translate="resizing_in_progress">Redimensionnement en cours...</p>
                </div>
            </div>
        </div>

        <!-- Products Section -->
        <div id="productsSection" class="section-hidden">
            <div class="products-section">
                <h2 class="products-title" data-translate="products_title">Accessoires recommandés pour Samsung The Frame</h2>
                <p class="products-subtitle" data-translate="products_subtitle">Découvrez notre sélection d'accessoires compatibles avec votre TV The Frame</p>
                
                <div class="products-grid" id="productsGrid">
                    <!-- Les produits seront générés dynamiquement par JavaScript -->
                </div>
                
                <p class="products-note" data-translate="products_note">
                    Note: Ces liens sont des liens d'affiliation. Si vous effectuez un achat via ces liens, je pourrais recevoir une petite commission sans frais supplémentaires pour vous.
                </p>
            </div>
        </div>

        <!-- Legal Section -->
        <div id="legalSection" class="section-hidden">
            <div class="legal-section">
                <h1 class="legal-title" data-translate="legal_title">Mentions légales & Politique de confidentialité</h1>
                
                <div class="legal-content">
                    <div class="highlight-box">
                        <p data-translate="legal_highlight"><strong>Important :</strong> Votre vie privée est notre priorité. Toutes les images que vous téléchargez sont traitées localement dans votre navigateur et ne sont jamais envoyées à nos serveurs. Aucune donnée personnelle n'est collectée, stockée ou partagée.</p>
                    </div>

                    <h2 data-translate="legal_editor">Éditeur du site</h2>
                    <p data-translate="legal_editor_content">Ce site est édité à titre personnel. Pour toute question concernant ce site, vous pouvez nous contacter via le formulaire de contact disponible sur cette page.</p>

                    <h2 data-translate="legal_hosting">Hébergement</h2>
                    <p data-translate="legal_hosting_content">Ce site est hébergé sur des serveurs sécurisés. L'hébergeur ne collecte aucune information personnelle via ce site.</p>

                    <h2 data-translate="legal_data">Protection des données personnelles</h2>
                    <p data-translate="legal_data_intro">Conformément au Règlement Général sur la Protection des Données (RGPD) et à la loi Informatique et Libertés, nous vous informons que :</p>
                    
                    <h3 data-translate="legal_data_collection">Collecte des données</h3>
                    <p data-translate="legal_data_collection_content">Ce site ne collecte aucune donnée personnelle identifiable. Aucune inscription ni création de compte n'est nécessaire pour utiliser nos services.</p>
                    
                    <h3 data-translate="legal_images">Traitement des images</h3>
                    <p data-translate="legal_images_content"><strong>Les images que vous téléchargez pour redimensionnement sont traitées exclusivement dans votre navigateur.</strong> Aucune image n'est envoyée à nos serveurs, stockée ou conservée d'aucune manière. Le processus de redimensionnement s'effectue entièrement en local sur votre appareil.</p>
                    
                    <h3 data-translate="legal_cookies">Cookies</h3>
                    <p data-translate="legal_cookies_content">Ce site utilise uniquement des cookies techniques essentiels au fonctionnement de l'application :</p>
                    <ul>
                        <li data-translate="legal_cookie_lang">Préférence de langue (pour mémoriser votre choix de langue)</li>
                        <li data-translate="legal_cookie_session">Cookies de session (pour le bon fonctionnement du redimensionneur d'images)</li>
                    </ul>
                    <p data-translate="legal_cookies_none">Aucun cookie de suivi ou de marketing n'est utilisé.</p>

                    <h2 data-translate="legal_affiliation">Liens d'affiliation</h2>
                    <p data-translate="legal_affiliation_content">Certains liens présents sur ce site sont des liens d'affiliation. Cela signifie que si vous effectuez un achat via ces liens, je peux recevoir une petite commission sans frais supplémentaires pour vous. Ces commissions aident à financer le maintien et le développement de ce service gratuit.</p>

                    <h2 data-translate="legal_rights">Vos droits</h2>
                    <p data-translate="legal_rights_content">Conformément à la réglementation sur la protection des données, vous disposez des droits suivants :</p>
                    <ul>
                        <li data-translate="legal_right_access">Droit d'accès à vos données</li>
                        <li data-translate="legal_right_rectification">Droit de rectification</li>
                        <li data-translate="legal_right_erasure">Droit à l'effacement</li>
                        <li data-translate="legal_right_portability">Droit à la portabilité des données</li>
                        <li data-translate="legal_right_restriction">Droit à la limitation du traitement</li>
                        <li data-translate="legal_right_object">Droit d'opposition</li>
                    </ul>
                    <p data-translate="legal_rights_contact">Pour exercer ces droits, vous pouvez nous contacter via le formulaire de contact.</p>

                    <h2 data-translate="legal_contact">Contact</h2>
                    <p data-translate="legal_contact_content">Pour toute question relative à cette politique de confidentialité ou pour exercer vos droits, vous pouvez nous contacter à l'adresse email suivante : <strong>contact@theframeresizer.com</strong></p>

                    <h2 data-translate="legal_changes">Modifications de la politique de confidentialité</h2>
                    <p data-translate="legal_changes_content">Nous nous réservons le droit de modifier cette politique de confidentialité à tout moment. Les changements éventuels seront publiés sur cette page.</p>

                    <p data-translate="legal_last_update"><em>Dernière mise à jour : 15 novembre 2023</em></p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p data-translate="footer_text">Outil de redimensionnement d'images pour Samsung The Frame - Design inspiré de Spotify</p>
            <div class="footer-links">
                <a href="#" class="footer-link" id="footerLegalLink" data-translate="footer_legal_link">Mentions légales</a>
                <a href="#" class="footer-link" id="footerContactLink" data-translate="footer_contact_link">Contact</a>
            </div>
        </div>
    </footer>

    <script>
        // Système de traduction
        const translations = {
            fr: {
                // Titres généraux
                'app_title': 'Image Resizer pour The Frame',
                'resizer_btn': 'Redimensionneur d\'images',
                'products_btn': 'Produits recommandés',
                'legal_btn': 'Mentions légales',
                
                // Étapes
                'steps_title': 'Étapes de redimensionnement',
                'step1_title': '1. Téléchargez votre image',
                'step1_desc': 'Sélectionnez votre image depuis votre appareil',
                'step2_title': '2. Sélectionnez la dimension',
                'step2_desc': 'Choisissez le modèle de votre TV The Frame Samsung',
                'step3_title': '3. Vérifiez l\'aperçu',
                'step3_desc': 'Contrôlez le résultat avant le téléchargement',
                'step4_title': '4. Téléchargez',
                'step4_desc': 'Récupérez votre image parfaitement dimensionnée',
                
                // Labels des étapes
                'step1_label': 'Étape 1',
                'step2_label': 'Étape 2',
                'step3_label': 'Étape 3',
                'step4_label': 'Étape 4',
                
                // Section upload
                'upload_title': 'Télécharger votre image',
                'upload_text': 'Cliquez pour sélectionner votre image',
                'continue_step2': 'Continuer vers l\'étape 2',
                
                // Section dimensions
                'dimension_title': 'Sélectionnez la dimension de votre TV',
                'custom_dimension': 'Personnalisé',
                'other_dimension': 'Autre dimension',
                'custom_dimensions': 'Dimensions personnalisées',
                'width_placeholder': 'Largeur',
                'height_placeholder': 'Hauteur',
                'back_step1': 'Retour à l\'étape 1',
                'continue_preview': 'Continuer vers l\'aperçu',
                
                // Section aperçu
                'preview_title': 'Aperçu et téléchargement',
                'preview_placeholder': 'L\'image redimensionnée apparaîtra ici',
                'original_dimensions': 'Dimensions originales:',
                'new_dimensions': 'Nouvelles dimensions:',
                'file_size': 'Taille du fichier:',
                'file_format': 'Format:',
                'back_dimensions': 'Retour aux dimensions',
                'download_resized': 'Télécharger l\'image redimensionnée',
                'restart': 'Recommencer',
                'resizing_in_progress': 'Redimensionnement en cours...',
                
                // Section produits
                'products_title': 'Accessoires recommandés pour Samsung The Frame',
                'products_subtitle': 'Découvrez notre sélection d\'accessoires compatibles avec votre TV The Frame',
                'products_note': 'Note: Ces liens sont des liens d\'affiliation. Si vous effectuez un achat via ces liens, je pourrais recevoir une petite commission sans frais supplémentaires pour vous.',
                
                // Section mentions légales
                'legal_title': 'Mentions légales & Politique de confidentialité',
                'legal_highlight': 'Important : Votre vie privée est notre priorité. Toutes les images que vous téléchargez sont traitées localement dans votre navigateur et ne sont jamais envoyées à nos serveurs. Aucune donnée personnelle n\'est collectée, stockée ou partagée.',
                'legal_editor': 'Éditeur du site',
                'legal_editor_content': 'Ce site est édité à titre personnel. Pour toute question concernant ce site, vous pouvez nous contacter via le formulaire de contact disponible sur cette page.',
                'legal_hosting': 'Hébergement',
                'legal_hosting_content': 'Ce site est hébergé sur des serveurs sécurisés. L\'hébergeur ne collecte aucune information personnelle via ce site.',
                'legal_data': 'Protection des données personnelles',
                'legal_data_intro': 'Conformément au Règlement Général sur la Protection des Données (RGPD) et à la loi Informatique et Libertés, nous vous informons que :',
                'legal_data_collection': 'Collecte des données',
                'legal_data_collection_content': 'Ce site ne collecte aucune donnée personnelle identifiable. Aucune inscription ni création de compte n\'est nécessaire pour utiliser nos services.',
                'legal_images': 'Traitement des images',
                'legal_images_content': 'Les images que vous téléchargez pour redimensionnement sont traitées exclusivement dans votre navigateur. Aucune image n\'est envoyée à nos serveurs, stockée ou conservée d\'aucune manière. Le processus de redimensionnement s\'effectue entièrement en local sur votre appareil.',
                'legal_cookies': 'Cookies',
                'legal_cookies_content': 'Ce site utilise uniquement des cookies techniques essentiels au fonctionnement de l\'application :',
                'legal_cookie_lang': 'Préférence de langue (pour mémoriser votre choix de langue)',
                'legal_cookie_session': 'Cookies de session (pour le bon fonctionnement du redimensionneur d\'images)',
                'legal_cookies_none': 'Aucun cookie de suivi ou de marketing n\'est utilisé.',
                'legal_affiliation': 'Liens d\'affiliation',
                'legal_affiliation_content': 'Certains liens présents sur ce site sont des liens d\'affiliation. Cela signifie que si vous effectuez un achat via ces liens, je peux recevoir une petite commission sans frais supplémentaires pour vous. Ces commissions aident à financer le maintien et le développement de ce service gratuit.',
                'legal_rights': 'Vos droits',
                'legal_rights_content': 'Conformément à la réglementation sur la protection des données, vous disposez des droits suivants :',
                'legal_right_access': 'Droit d\'accès à vos données',
                'legal_right_rectification': 'Droit de rectification',
                'legal_right_erasure': 'Droit à l\'effacement',
                'legal_right_portability': 'Droit à la portabilité des données',
                'legal_right_restriction': 'Droit à la limitation du traitement',
                'legal_right_object': 'Droit d\'opposition',
                'legal_rights_contact': 'Pour exercer ces droits, vous pouvez nous contacter via le formulaire de contact.',
                'legal_contact': 'Contact',
                'legal_contact_content': 'Pour toute question relative à cette politique de confidentialité ou pour exercer vos droits, vous pouvez nous contacter à l\'adresse email suivante : contact@theframeresizer.com',
                'legal_changes': 'Modifications de la politique de confidentialité',
                'legal_changes_content': 'Nous nous réservons le droit de modifier cette politique de confidentialité à tout moment. Les changements éventuels seront publiés sur cette page.',
                'legal_last_update': 'Dernière mise à jour : 15 novembre 2023',
                
                // Footer
                'footer_text': 'Outil de redimensionnement d\'images pour Samsung The Frame - Design inspiré de Spotify',
                'footer_legal_link': 'Mentions légales',
                'footer_contact_link': 'Contact'
            },
            en: {
                // General titles
                'app_title': 'Image Resizer for The Frame',
                'resizer_btn': 'Image Resizer',
                'products_btn': 'Recommended Products',
                'legal_btn': 'Legal Notice',
                
                // Steps
                'steps_title': 'Resizing Steps',
                'step1_title': '1. Upload your image',
                'step1_desc': 'Select your image from your device',
                'step2_title': '2. Select the dimension',
                'step2_desc': 'Choose your Samsung The Frame TV model',
                'step3_title': '3. Check the preview',
                'step3_desc': 'Check the result before downloading',
                'step4_title': '4. Download',
                'step4_desc': 'Get your perfectly sized image',
                
                // Step labels
                'step1_label': 'Step 1',
                'step2_label': 'Step 2',
                'step3_label': 'Step 3',
                'step4_label': 'Step 4',
                
                // Upload section
                'upload_title': 'Upload your image',
                'upload_text': 'Click to select your image',
                'continue_step2': 'Continue to step 2',
                
                // Dimension section
                'dimension_title': 'Select your TV dimension',
                'custom_dimension': 'Custom',
                'other_dimension': 'Other dimension',
                'custom_dimensions': 'Custom dimensions',
                'width_placeholder': 'Width',
                'height_placeholder': 'Height',
                'back_step1': 'Back to step 1',
                'continue_preview': 'Continue to preview',
                
                // Preview section
                'preview_title': 'Preview and download',
                'preview_placeholder': 'The resized image will appear here',
                'original_dimensions': 'Original dimensions:',
                'new_dimensions': 'New dimensions:',
                'file_size': 'File size:',
                'file_format': 'Format:',
                'back_dimensions': 'Back to dimensions',
                'download_resized': 'Download resized image',
                'restart': 'Start over',
                'resizing_in_progress': 'Resizing in progress...',
                
                // Products section
                'products_title': 'Recommended Accessories for Samsung The Frame',
                'products_subtitle': 'Discover our selection of accessories compatible with your The Frame TV',
                'products_note': 'Note: These are affiliate links. If you make a purchase through these links, I may receive a small commission at no extra cost to you.',
                
                // Legal section
                'legal_title': 'Legal Notice & Privacy Policy',
                'legal_highlight': 'Important: Your privacy is our priority. All images you upload are processed locally in your browser and are never sent to our servers. No personal data is collected, stored or shared.',
                'legal_editor': 'Site Editor',
                'legal_editor_content': 'This site is published on a personal basis. For any questions regarding this site, you can contact us via the contact form available on this page.',
                'legal_hosting': 'Hosting',
                'legal_hosting_content': 'This site is hosted on secure servers. The host does not collect any personal information through this site.',
                'legal_data': 'Personal Data Protection',
                'legal_data_intro': 'In accordance with the General Data Protection Regulation (GDPR) and the Data Protection Act, we inform you that:',
                'legal_data_collection': 'Data collection',
                'legal_data_collection_content': 'This site does not collect any identifiable personal data. No registration or account creation is required to use our services.',
                'legal_images': 'Image processing',
                'legal_images_content': 'The images you upload for resizing are processed exclusively in your browser. No images are sent to our servers, stored or retained in any way. The resizing process takes place entirely locally on your device.',
                'legal_cookies': 'Cookies',
                'legal_cookies_content': 'This site uses only technical cookies essential for the application to function:',
                'legal_cookie_lang': 'Language preference (to remember your language choice)',
                'legal_cookie_session': 'Session cookies (for the proper functioning of the image resizer)',
                'legal_cookies_none': 'No tracking or marketing cookies are used.',
                'legal_affiliation': 'Affiliate links',
                'legal_affiliation_content': 'Some links on this site are affiliate links. This means that if you make a purchase through these links, I may receive a small commission at no extra cost to you. These commissions help fund the maintenance and development of this free service.',
                'legal_rights': 'Your rights',
                'legal_rights_content': 'In accordance with data protection regulations, you have the following rights:',
                'legal_right_access': 'Right to access your data',
                'legal_right_rectification': 'Right to rectification',
                'legal_right_erasure': 'Right to erasure',
                'legal_right_portability': 'Right to data portability',
                'legal_right_restriction': 'Right to restriction of processing',
                'legal_right_object': 'Right to object',
                'legal_rights_contact': 'To exercise these rights, you can contact us via the contact form.',
                'legal_contact': 'Contact',
                'legal_contact_content': 'For any questions regarding this privacy policy or to exercise your rights, you can contact us at the following email address: contact@theframeresizer.com',
                'legal_changes': 'Changes to the privacy policy',
                'legal_changes_content': 'We reserve the right to modify this privacy policy at any time. Any changes will be published on this page.',
                'legal_last_update': 'Last updated: November 15, 2023',
                
                // Footer
                'footer_text': 'Image resizing tool for Samsung The Frame - Design inspired by Spotify',
                'footer_legal_link': 'Legal Notice',
                'footer_contact_link': 'Contact'
            },
            es: {
                // Títulos generales
                'app_title': 'Redimensionador de Imágenes para The Frame',
                'resizer_btn': 'Redimensionador de Imágenes',
                'products_btn': 'Productos Recomendados',
                'legal_btn': 'Aviso Legal',
                
                // Pasos
                'steps_title': 'Pasos de Redimensionamiento',
                'step1_title': '1. Sube tu imagen',
                'step1_desc': 'Selecciona tu imagen desde tu dispositivo',
                'step2_title': '2. Selecciona la dimensión',
                'step2_desc': 'Elige tu modelo de TV Samsung The Frame',
                'step3_title': '3. Verifica la vista previa',
                'step3_desc': 'Controla el resultado antes de descargar',
                'step4_title': '4. Descarga',
                'step4_desc': 'Obtén tu imagen perfectamente dimensionada',
                
                // Etiquetas de pasos
                'step1_label': 'Paso 1',
                'step2_label': 'Paso 2',
                'step3_label': 'Paso 3',
                'step4_label': 'Paso 4',
                
                // Sección de subida
                'upload_title': 'Subir tu imagen',
                'upload_text': 'Haz clic para seleccionar tu imagen',
                'continue_step2': 'Continuar al paso 2',
                
                // Sección de dimensiones
                'dimension_title': 'Selecciona la dimensión de tu TV',
                'custom_dimension': 'Personalizado',
                'other_dimension': 'Otra dimensión',
                'custom_dimensions': 'Dimensiones personalizadas',
                'width_placeholder': 'Ancho',
                'height_placeholder': 'Alto',
                'back_step1': 'Volver al paso 1',
                'continue_preview': 'Continuar a la vista previa',
                
                // Sección de vista previa
                'preview_title': 'Vista previa y descarga',
                'preview_placeholder': 'La imagen redimensionada aparecerá aquí',
                'original_dimensions': 'Dimensiones originales:',
                'new_dimensions': 'Nuevas dimensiones:',
                'file_size': 'Tamaño del archivo:',
                'file_format': 'Formato:',
                'back_dimensions': 'Volver a dimensiones',
                'download_resized': 'Descargar imagen redimensionada',
                'restart': 'Comenzar de nuevo',
                'resizing_in_progress': 'Redimensionando...',
                
                // Sección de productos
                'products_title': 'Accesorios Recomendados para Samsung The Frame',
                'products_subtitle': 'Descubre nuestra selección de accesorios compatibles con tu TV The Frame',
                'products_note': 'Nota: Estos son enlaces de afiliados. Si realizas una compra a través de estos enlaces, puedo recibir una pequeña comisión sin costo adicional para ti.',
                
                // Sección legal
                'legal_title': 'Aviso Legal y Política de Privacidad',
                'legal_highlight': 'Importante: Su privacidad es nuestra prioridad. Todas las imágenes que suba se procesan localmente en su navegador y nunca se envían a nuestros servidores. No se recopila, almacena ni comparte ningún dato personal.',
                'legal_editor': 'Editor del sitio',
                'legal_editor_content': 'Este sitio se edita a título personal. Para cualquier pregunta sobre este sitio, puede contactarnos a través del formulario de contacto disponible en esta página.',
                'legal_hosting': 'Alojamiento',
                'legal_hosting_content': 'Este sitio está alojado en servidores seguros. El anfitrión no recopila ninguna información personal a través de este sitio.',
                'legal_data': 'Protección de datos personales',
                'legal_data_intro': 'De acuerdo con el Reglamento General de Protección de Datos (RGPD) y la Ley de Protección de Datos, le informamos que:',
                'legal_data_collection': 'Recopilación de datos',
                'legal_data_collection_content': 'Este sitio no recopila ningún dato personal identificable. No es necesario registrarse ni crear una cuenta para utilizar nuestros servicios.',
                'legal_images': 'Procesamiento de imágenes',
                'legal_images_content': 'Las imágenes que sube para redimensionar se procesan exclusivamente en su navegador. Ninguna imagen se envía a nuestros servidores, se almacena o se conserva de ninguna manera. El proceso de redimensionamiento se realiza completamente de forma local en su dispositivo.',
                'legal_cookies': 'Cookies',
                'legal_cookies_content': 'Este sitio utiliza únicamente cookies técnicas esenciales para el funcionamiento de la aplicación:',
                'legal_cookie_lang': 'Preferencia de idioma (para recordar su elección de idioma)',
                'legal_cookie_session': 'Cookies de sesión (para el correcto funcionamiento del redimensionador de imágenes)',
                'legal_cookies_none': 'No se utilizan cookies de seguimiento o marketing.',
                'legal_affiliation': 'Enlaces de afiliados',
                'legal_affiliation_content': 'Algunos enlaces presentes en este sitio son enlaces de afiliados. Esto significa que si realiza una compra a través de estos enlaces, puedo recibir una pequeña comisión sin costo adicional para usted. Estas comisiones ayudan a financiar el mantenimiento y desarrollo de este servicio gratuito.',
                'legal_rights': 'Sus derechos',
                'legal_rights_content': 'De acuerdo con la normativa de protección de datos, usted tiene los siguientes derechos:',
                'legal_right_access': 'Derecho de acceso a sus datos',
                'legal_right_rectification': 'Derecho de rectificación',
                'legal_right_erasure': 'Derecho de supresión',
                'legal_right_portability': 'Derecho a la portabilidad de los datos',
                'legal_right_restriction': 'Derecho a la limitación del tratamiento',
                'legal_right_object': 'Derecho de oposición',
                'legal_rights_contact': 'Para ejercer estos derechos, puede contactarnos a través del formulario de contacto.',
                'legal_contact': 'Contacto',
                'legal_contact_content': 'Para cualquier pregunta relativa a esta política de privacidad o para ejercer sus derechos, puede contactarnos en la siguiente dirección de correo electrónico: contact@theframeresizer.com',
                'legal_changes': 'Modificaciones de la política de privacidad',
                'legal_changes_content': 'Nos reservamos el derecho de modificar esta política de privacidad en cualquier momento. Los posibles cambios se publicarán en esta página.',
                'legal_last_update': 'Última actualización: 15 de noviembre de 2023',
                
                // Footer
                'footer_text': 'Herramienta de redimensionamiento de imágenes para Samsung The Frame - Diseño inspirado en Spotify',
                'footer_legal_link': 'Aviso Legal',
                'footer_contact_link': 'Contacto'
            }
        };

        // Données des produits
        const products = [
            {
                id: 1,
                name: "Support mural sans fil Samsung",
                category: "Support",
                description: "Support mural officiel Samsung pour une installation élégante et sans fil de votre TV The Frame.",
                price: "€89,99",
                image: "https://images.samsung.com/is/image/samsung/p5/fr/tvs/the-frame/accessories/wm45b-wall-mount-kit.png",
                link: "https://www.amazon.fr/dp/B08C1Y7W5H"
            },
            {
                id: 2,
                name: "Cadres décoratifs interchangeables",
                category: "Cadres",
                description: "Collection de cadres colorés pour personnaliser l'apparence de votre TV The Frame selon votre décoration.",
                price: "À partir de €99",
                image: "https://images.samsung.com/is/image/samsung/p5/fr/tvs/the-frame/accessories/bezel-studio-gray.png",
                link: "https://www.amazon.fr/dp/B08C1ZQ6L7"
            },
            {
                id: 3,
                name: "Câble One Connect invisible 5m",
                category: "Câbles",
                description: "Câble de connexion longueur 5m pour relier votre TV The Frame au boîtier One Connect sans encombrement visible.",
                price: "€129,99",
                image: "https://images.samsung.com/is/image/samsung/p5/fr/tvs/the-frame/accessories/one-connect-cable-5m.png",
                link: "https://www.amazon.fr/dp/B08C1ZQ6L8"
            },
            {
                id: 4,
                name: "Kit de nettoyage écran premium",
                category: "Entretien",
                description: "Kit spécialement conçu pour nettoyer en toute sécurité l'écran de votre TV The Frame sans laisser de traces.",
                price: "€24,99",
                image: "https://m.media-amazon.com/images/I/71K8Fg+L7SL._AC_SL1500_.jpg",
                link: "https://www.amazon.fr/dp/B08C1ZQ6L9"
            },
            {
                id: 5,
                name: "Support pivotant universel",
                category: "Support",
                description: "Support mural pivotant permettant d'ajuster l'angle de vision de votre TV The Frame selon vos besoins.",
                price: "€59,99",
                image: "https://m.media-amazon.com/images/I/71z9Vf8Jw2L._AC_SL1500_.jpg",
                link: "https://www.amazon.fr/dp/B08C1ZQ6M0"
            },
            {
                id: 6,
                name: "Barre de son Samsung HW-Q600A",
                category: "Audio",
                description: "Barre de son compatible avec votre TV The Frame pour une expérience audio immersive et de qualité.",
                price: "€399,99",
                image: "https://images.samsung.com/is/image/samsung/p5/fr/audio/hw-q600a-za-front-black-01.png",
                link: "https://www.amazon.fr/dp/B08C1ZQ6M1"
            }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            // Références aux éléments DOM
            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            const selectedFilesContainer = document.getElementById('selectedFiles');
            const dimensionOptions = document.querySelectorAll('.dimension-option');
            const customDimension = document.getElementById('customDimension');
            const customWidth = document.getElementById('customWidth');
            const customHeight = document.getElementById('customHeight');
            const previewCanvas = document.getElementById('previewCanvas');
            const ctx = previewCanvas.getContext('2d');
            const placeholderText = document.getElementById('placeholderText');
            const downloadBtn = document.getElementById('downloadBtn');
            const originalDimensions = document.getElementById('originalDimensions');
            const newDimensions = document.getElementById('newDimensions');
            const fileSize = document.getElementById('fileSize');
            const fileFormat = document.getElementById('fileFormat');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const progressBar = document.getElementById('progressBar');
            const productsGrid = document.getElementById('productsGrid');
            
            // Boutons de navigation
            const nextStep1Btn = document.getElementById('nextStep1Btn');
            const prevStep2Btn = document.getElementById('prevStep2Btn');
            const nextStep2Btn = document.getElementById('nextStep2Btn');
            const prevStep3Btn = document.getElementById('prevStep3Btn');
            const restartBtn = document.getElementById('restartBtn');
            
            // Navigation des étapes
            const stepNavPrev = document.getElementById('stepNavPrev');
            const stepNavNext = document.getElementById('stepNavNext');
            const cardsContainer = document.getElementById('cardsContainer');
            
            // Sections de contenu
            const step1Content = document.getElementById('step1Content');
            const step2Content = document.getElementById('step2Content');
            const step3Content = document.getElementById('step3Content');
            
            // Cartes d'étapes
            const step1Card = document.getElementById('step1Card');
            const step2Card = document.getElementById('step2Card');
            const step3Card = document.getElementById('step3Card');
            const step4Card = document.getElementById('step4Card');
            
            // Navigation principale
            const resizerBtn = document.getElementById('resizerBtn');
            const productsBtn = document.getElementById('productsBtn');
            const legalBtn = document.getElementById('legalBtn');
            const resizerSection = document.getElementById('resizerSection');
            const productsSection = document.getElementById('productsSection');
            const legalSection = document.getElementById('legalSection');
            
            // Footer links
            const footerLegalLink = document.getElementById('footerLegalLink');
            const footerContactLink = document.getElementById('footerContactLink');
            
            // Sélecteur de langue
            const languageSelect = document.getElementById('languageSelect');
            
            let selectedFile = null;
            let originalImage = null;
            let resizedImage = null;
            let targetWidth = 1920;
            let targetHeight = 1080;
            let currentStep = 1;
            let currentLanguage = 'fr';
            
            // Fonction pour générer les produits
            function generateProducts() {
                productsGrid.innerHTML = '';
                
                products.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.src='https://via.placeholder.com/300x200/282828/FFFFFF?text=Image+Non+Disponible'">
                        <div class="product-content">
                            <div class="product-category">${product.category}</div>
                            <h3 class="product-name">${product.name}</h3>
                            <p class="product-description">${product.description}</p>
                            <div class="product-price">${product.price}</div>
                            <a href="${product.link}" class="product-link" target="_blank" data-translate="view_product">Voir le produit</a>
                        </div>
                    `;
                    productsGrid.appendChild(productCard);
                });
            }
            
            // Fonction de traduction
            function translatePage(lang) {
                currentLanguage = lang;
                
                // Mettre à jour tous les éléments avec data-translate
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translations[lang] && translations[lang][key]) {
                        element.textContent = translations[lang][key];
                    }
                });
                
                // Mettre à jour les placeholders
                document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                    const key = element.getAttribute('data-translate-placeholder');
                    if (translations[lang] && translations[lang][key]) {
                        element.placeholder = translations[lang][key];
                    }
                });
                
                // Mettre à jour les textes dans les boutons avec des icônes
                const downloadBtnText = document.querySelector('#downloadBtn span');
                if (downloadBtnText && translations[lang] && translations[lang]['download_resized']) {
                    downloadBtnText.textContent = translations[lang]['download_resized'];
                }
                
                const restartBtnText = document.querySelector('#restartBtn span');
                if (restartBtnText && translations[lang] && translations[lang]['restart']) {
                    restartBtnText.textContent = translations[lang]['restart'];
                }
                
                // Mettre à jour le sélecteur de langue
                languageSelect.value = lang;
                
                // Sauvegarder la langue dans le localStorage
                localStorage.setItem('language', lang);
            }
            
            // Mettre à jour la barre de progression
            function updateProgressBar() {
                const progress = (currentStep / 4) * 100;
                progressBar.style.width = `${progress}%`;
            }
            
            // Navigation entre les étapes
            function goToStep(step) {
                // Masquer toutes les sections
                step1Content.classList.add('section-hidden');
                step2Content.classList.add('section-hidden');
                step3Content.classList.add('section-hidden');
                
                // Désactiver toutes les cartes
                step1Card.classList.remove('active', 'completed');
                step2Card.classList.remove('active', 'completed');
                step3Card.classList.remove('active', 'completed');
                step4Card.classList.remove('active', 'completed');
                
                // Afficher la section correspondante et activer la carte
                if (step === 1) {
                    step1Content.classList.remove('section-hidden');
                    step1Card.classList.add('active');
                    currentStep = 1;
                } else if (step === 2) {
                    step2Content.classList.remove('section-hidden');
                    step1Card.classList.add('completed');
                    step2Card.classList.add('active');
                    currentStep = 2;
                } else if (step === 3) {
                    step3Content.classList.remove('section-hidden');
                    step1Card.classList.add('completed');
                    step2Card.classList.add('completed');
                    step3Card.classList.add('active');
                    currentStep = 3;
                    
                    // Redimensionner l'image quand on arrive à l'étape 3
                    resizeImage();
                }
                
                updateProgressBar();
            }
            
            // Événements de navigation
            nextStep1Btn.addEventListener('click', () => goToStep(2));
            prevStep2Btn.addEventListener('click', () => goToStep(1));
            nextStep2Btn.addEventListener('click', () => goToStep(3));
            prevStep3Btn.addEventListener('click', () => goToStep(2));
            restartBtn.addEventListener('click', () => {
                // Réinitialiser l'application
                selectedFile = null;
                originalImage = null;
                resizedImage = null;
                selectedFilesContainer.innerHTML = '';
                uploadArea.innerHTML = `
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p data-translate="upload_text">Cliquez pour sélectionner votre image</p>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;">
                `;
                // Retraduire le texte de l'upload area
                const uploadText = uploadArea.querySelector('p');
                if (uploadText && translations[currentLanguage] && translations[currentLanguage]['upload_text']) {
                    uploadText.textContent = translations[currentLanguage]['upload_text'];
                }
                
                nextStep1Btn.disabled = true;
                downloadBtn.disabled = true;
                placeholderText.style.display = 'block';
                goToStep(1);
            });
            
            // Navigation des étapes avec les flèches
            stepNavPrev.addEventListener('click', () => {
                cardsContainer.scrollBy({
                    left: -250,
                    behavior: 'smooth'
                });
            });
            
            stepNavNext.addEventListener('click', () => {
                cardsContainer.scrollBy({
                    left: 250,
                    behavior: 'smooth'
                });
            });
            
            // Navigation principale
            resizerBtn.addEventListener('click', () => {
                resizerBtn.classList.add('active');
                productsBtn.classList.remove('active');
                legalBtn.classList.remove('active');
                resizerSection.classList.remove('section-hidden');
                productsSection.classList.add('section-hidden');
                legalSection.classList.add('section-hidden');
            });
            
            productsBtn.addEventListener('click', () => {
                productsBtn.classList.add('active');
                resizerBtn.classList.remove('active');
                legalBtn.classList.remove('active');
                productsSection.classList.remove('section-hidden');
                resizerSection.classList.add('section-hidden');
                legalSection.classList.add('section-hidden');
            });
            
            legalBtn.addEventListener('click', () => {
                legalBtn.classList.add('active');
                resizerBtn.classList.remove('active');
                productsBtn.classList.remove('active');
                legalSection.classList.remove('section-hidden');
                resizerSection.classList.add('section-hidden');
                productsSection.classList.add('section-hidden');
            });
            
            // Footer links
            footerLegalLink.addEventListener('click', (e) => {
                e.preventDefault();
                legalBtn.click();
            });
            
            footerContactLink.addEventListener('click', (e) => {
                e.preventDefault();
                // Pour l'instant, rediriger vers la page des mentions légales
                // Dans une version future, on pourrait ajouter une section contact
                legalBtn.click();
            });
            
            // Gestion du glisser-déposer et du clic pour télécharger
            uploadArea.addEventListener('click', () => fileInput.click());
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--spotify-green)';
                uploadArea.style.backgroundColor = 'rgba(29, 185, 84, 0.05)';
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.style.borderColor = 'var(--spotify-dark-gray)';
                uploadArea.style.backgroundColor = '';
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--spotify-dark-gray)';
                uploadArea.style.backgroundColor = '';
                
                if (e.dataTransfer.files.length) {
                    handleFile(e.dataTransfer.files[0]);
                }
            });
            
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    handleFile(e.target.files[0]);
                }
            });
            
            // Gestion de la sélection des dimensions
            dimensionOptions.forEach(option => {
                option.addEventListener('click', function() {
                    dimensionOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    if (this.id === 'customOption') {
                        customDimension.style.display = 'block';
                        targetWidth = parseInt(customWidth.value) || 1920;
                        targetHeight = parseInt(customHeight.value) || 1080;
                    } else {
                        customDimension.style.display = 'none';
                        targetWidth = parseInt(this.dataset.width);
                        targetHeight = parseInt(this.dataset.height);
                    }
                    
                    // Mettre à jour les nouvelles dimensions affichées
                    newDimensions.textContent = `${targetWidth} × ${targetHeight}`;
                });
            });
            
            // Mise à jour des dimensions personnalisées
            customWidth.addEventListener('input', function() {
                targetWidth = parseInt(this.value) || 1920;
                newDimensions.textContent = `${targetWidth} × ${targetHeight}`;
            });
            
            customHeight.addEventListener('input', function() {
                targetHeight = parseInt(this.value) || 1080;
                newDimensions.textContent = `${targetWidth} × ${targetHeight}`;
            });
            
            // Fonction pour gérer le fichier sélectionné
            function handleFile(file) {
                if (!file.type.match('image.*')) {
                    alert('Veuillez sélectionner un fichier image.');
                    return;
                }
                
                selectedFile = file;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    originalImage = new Image();
                    originalImage.onload = function() {
                        originalDimensions.textContent = `${originalImage.width} × ${originalImage.height}`;
                        fileSize.textContent = formatFileSize(file.size);
                        fileFormat.textContent = file.type.split('/')[1].toUpperCase();
                    };
                    originalImage.src = e.target.result;
                };
                reader.readAsDataURL(file);
                
                updateSelectedFilesList();
                
                // Activer le bouton pour passer à l'étape suivante
                nextStep1Btn.disabled = false;
            }
            
            // Mettre à jour la liste des fichiers sélectionnés
            function updateSelectedFilesList() {
                selectedFilesContainer.innerHTML = '';
                
                if (!selectedFile) {
                    uploadArea.innerHTML = `
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p data-translate="upload_text">Cliquez pour sélectionner votre image</p>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    `;
                    // Retraduire le texte de l'upload area
                    const uploadText = uploadArea.querySelector('p');
                    if (uploadText && translations[currentLanguage] && translations[currentLanguage]['upload_text']) {
                        uploadText.textContent = translations[currentLanguage]['upload_text'];
                    }
                    return;
                }
                
                const fileSelectedText = translations[currentLanguage] && translations[currentLanguage]['upload_text'] 
                    ? translations[currentLanguage]['upload_text'] 
                    : 'Fichier sélectionné';
                    
                const clickToChangeText = translations[currentLanguage] && translations[currentLanguage]['upload_text'] 
                    ? 'Cliquez pour changer'
                    : 'Click to change';
                
                uploadArea.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    <p>${fileSelectedText}: ${selectedFile.name}</p>
                    <p style="font-size: 0.8rem; margin-top: 10px; color: var(--spotify-green);">${clickToChangeText}</p>
                `;
                
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <i class="fas fa-image file-icon"></i>
                        <span class="file-name">${selectedFile.name}</span>
                    </div>
                    <button class="remove-file" id="removeFileBtn">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                selectedFilesContainer.appendChild(fileItem);
                
                // Ajouter l'événement de suppression
                document.getElementById('removeFileBtn').addEventListener('click', function() {
                    selectedFile = null;
                    originalImage = null;
                    updateSelectedFilesList();
                    nextStep1Btn.disabled = true;
                    placeholderText.style.display = 'block';
                });
            }
            
            // Fonction pour dessiner une image en conservant le ratio (sans rogner)
            function drawImageProp(ctx, img, x, y, w, h, offsetX, offsetY) {
                if (arguments.length === 2) {
                    x = y = 0;
                    w = ctx.canvas.width;
                    h = ctx.canvas.height;
                }
                
                // default offset is center
                offsetX = typeof offsetX === "number" ? offsetX : 0.5;
                offsetY = typeof offsetY === "number" ? offsetY : 0.5;
                
                // keep bounds [0.0, 1.0]
                if (offsetX < 0) offsetX = 0;
                if (offsetY < 0) offsetY = 0;
                if (offsetX > 1) offsetX = 1;
                if (offsetY > 1) offsetY = 1;
                
                var iw = img.width,
                    ih = img.height,
                    r = Math.min(w / iw, h / ih),
                    nw = iw * r,   // new prop. width
                    nh = ih * r,   // new prop. height
                    cx, cy, cw, ch, ar = 1;
                
                // decide which gap to fill    
                if (nw < w) ar = w / nw;                             
                if (Math.abs(ar - 1) < 1e-14 && nh < h) ar = h / nh;  // updated
                nw *= ar;
                nh *= ar;
                
                // calc source rectangle
                cw = iw / (nw / w);
                ch = ih / (nh / h);
                
                cx = (iw - cw) * offsetX;
                cy = (ih - ch) * offsetY;
                
                // make sure source rectangle is valid
                if (cx < 0) cx = 0;
                if (cy < 0) cy = 0;
                if (cw > iw) cw = iw;
                if (ch > ih) ch = ih;
                
                // fill image in dest. rectangle
                ctx.drawImage(img, cx, cy, cw, ch,  x, y, w, h);
            }
            
            // Fonction de redimensionnement
            function resizeImage() {
                if (!originalImage) return;
                
                loadingIndicator.style.display = 'block';
                
                // Simuler un temps de traitement
                setTimeout(() => {
                    // Créer un canvas pour l'image finale
                    const canvas = document.createElement('canvas');
                    canvas.width = targetWidth;
                    canvas.height = targetHeight;
                    const ctx = canvas.getContext('2d');
                    
                    // Remplir le fond avec une couleur noire (pour les bandes si nécessaire)
                    ctx.fillStyle = 'black';
                    ctx.fillRect(0, 0, targetWidth, targetHeight);
                    
                    // Dessiner l'image redimensionnée en conservant le ratio
                    drawImageProp(ctx, originalImage, 0, 0, targetWidth, targetHeight);
                    
                    resizedImage = canvas;
                    
                    // Afficher l'aperçu
                    showPreview();
                    
                    // Activer le bouton de téléchargement
                    downloadBtn.disabled = false;
                    loadingIndicator.style.display = 'none';
                    
                    // Marquer l'étape 3 comme terminée
                    step3Card.classList.add('completed');
                    step4Card.classList.add('active');
                    currentStep = 4;
                    updateProgressBar();
                }, 1000);
            }
            
            // Afficher l'aperçu
            function showPreview() {
                if (!resizedImage) return;
                
                // Définir la taille du canvas pour l'aperçu
                previewCanvas.width = Math.min(targetWidth, 500);
                previewCanvas.height = Math.min(targetHeight, 300);
                
                // Redessiner l'image en conservant le ratio (sans rogner)
                ctx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);
                drawImageProp(ctx, resizedImage, 0, 0, previewCanvas.width, previewCanvas.height);
                
                // Mettre à jour les informations
                newDimensions.textContent = `${targetWidth} × ${targetHeight}`;
                
                placeholderText.style.display = 'none';
            }
            
            // Gestion du téléchargement
            downloadBtn.addEventListener('click', function() {
                if (!resizedImage) return;
                
                resizedImage.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `theframe_${targetWidth}x${targetHeight}_${selectedFile.name}`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 'image/jpeg', 0.95);
            });
            
            // Fonction utilitaire pour formater la taille du fichier
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // Gestion du changement de langue
            languageSelect.addEventListener('change', function() {
                const selectedLanguage = this.value;
                translatePage(selectedLanguage);
                
                // Mettre à jour les textes dynamiques
                if (selectedFile) {
                    updateSelectedFilesList();
                }
            });
            
            // Initialiser la langue depuis le localStorage ou utiliser le français par défaut
            const savedLanguage = localStorage.getItem('language') || 'fr';
            languageSelect.value = savedLanguage;
            translatePage(savedLanguage);
            
            // Générer les produits
            generateProducts();
            
            // Initialiser la barre de progression
            updateProgressBar();
        });
    </script>
</body>
</html>